Object MordorBlackOrcHorde

	// This is required for garrisoned objects - please put in all objects.
	SelectPortrait         = up_impsoldier
	ButtonImage         = ub_impsoldier

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER EMOTION_TERROR EMOTION_LOOK_TO_SKY EMOTION_TAUNTING EMOTION_POINTING SELECTED
		DefaultModelConditionState
			Model = None //InvisHrdeTmp5x2
		End

		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkGUSol
		End		
	End
	
	Side = Mordor
	EditorSorting = UNIT
	EmotionRange = 240
	DisplayName = OBJECT:HordeImperialSoldier
	DisplayNameStrategic = CONTROLBAR:LW_Unit_ImperialSoldierHorde
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_ImperialSoldierHorde
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NormalMeleeHordeRangefinder
	End

	// *** AUDIO Parameters ***//
	// Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	// are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	UnitSpecificSounds
		VoiceDesperateAttack  = GondorSoldierVoiceDesperateCharge 
	End

	BuildCost 		= BFA_GONDOR_SOLDIER_BUILDCOST
	BuildTime 		= BFA_GONDOR_SOLDIER_BUILDTIME
	ShroudClearingRange 	= BFA_GONDOR_SOLDIER_HORDE_SHROUD_RANGE       
	VisionRange 		= BFA_GONDOR_SOLDIER_HORDE_VISION_RANGE
	VisionSide 		= 50%
	VisionRear 		= 25%
	MaxVisionBonusPercent 	= 300%
	VisionBonusTestRadius 	= 200
	VisionBonusPercentPerFoot = 1.0%
	CommandPoints 		= 60
	
	FormationWidth 		= 2 		// Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 1 		// Depth it occupies in formations. Current choices are 1 or 2.
	
 	CrushableLevel 		= 0  		//What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 		= 0
	 
    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE NOTIFY_OF_PREATTACK ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND //UNATTACKABLE 

	ThreatLevel = BFA_GONDOR_FIGHTER_HORDE_THREAT
	ThreatBreakdown ArnorFighterHorde_DetailedThreat
		AIKindOf = INFANTRY
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End

	#include "..\..\..\includes\CaptureBuilding.inc"
    
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End
    
	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AILuaEventsList			= InfantryFunctions
		AttackPriority			= AttackPriority_Infantry
	End

	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle 		= 270
		FlankedDelay 		= 2000
		ObjectStatusOfContained = 
		InitialPayload 		= ImperialSoldier BFA_GOOD_MEN_GIANT_HORDE_SIZE
		Slots 			= 15
		PassengerFilter		= NONE +INFANTRY
		ShowPips 		= No
		ThisFormationIsTheMainFormation = Yes			//Used to determine which armorset to use (and anything else we want!)
		RandomOffset		= X:0 Y:0
		MeleeBehavior 		= Amoeba
		End

		// Banner Carrier info		
		BannerCarriersAllowed	= ImperialInfantryBanner					// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:ImperialSoldier	Pos:X:70.0 Y:0.0		// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:ImperialSoldier Position:X:50 Y:0			Position:X:50 Y:20				Position:X:50 Y:-20				Position:X:50 Y:40				Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:ImperialSoldier Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:ImperialSoldier Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1 

		AlternateFormation 		= MordorBlackOrcHordeBlock
		MeleeAttackLeashDistance 	= 1   				// How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		= 1				// The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		= 3000				// The maximum amount of	time to	delay before backing up
		BackUpMinDistance		= 1				// The minimum number of	cells to backup
		BackUpMaxDistance		= 3				// The maximum number of	cells to backup
		BackupPercentage		= 80%				// The amount of	chance that	a unit will	back up.
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
	End
  
   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance	 	= BFA_INFANTRY_TAUNT_POINT_RADIUS	   // max distance to taunted/pointed objet
		TauntAndPointUpdateDelay 	= 1000		   // how often	scan (milliseconds)
		TauntAndPointExcluded	 	= NONE
		AfraidOf			= BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			= BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				= BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		= 150
		FearScanDistance		= BFA_INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base				//OVERRIDE
			//StartFXList		=	FX_GondorSoldierDoom			//these have been hooked up in the FXList.INI
			//End

		AddEmotion			=   BraceForBeingCrushed_Base
		
		AddEmotion			=	UncontrollableFear_Base			//OVERRIDE
			//StartFXList		=	FX_GondorSoldierFear
			//End
		
		AddEmotion			=	FearIdle_Base				//OVERRIDE
			//StartFXList		=	FX_GondorSoldierFear
			//End
		
		AddEmotion			=	FearBusy_Base				//OVERRIDE
			//StartFXList		=	FX_GondorSoldierFear
			//End
	
		AddEmotion			=	Point_Base				//OVERRIDE
			//Duration		=	13980
			//StartFXList		=	FX_GondorSoldierPoint
			//End
		
		AddEmotion			=	Taunt_Base				//OVERRIDE
 			//AttributeModifier	=	ArnorFighterTaunt
 			//End		
 		
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End
  
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_SLOW_HORDE_SPEED
	End
	
	LocomotorSet
		Locomotor     = ScaredMeleeHordeLocomotor
		Condition     = SET_SCARED
		Speed         = BFA_NORMAL_FOOT_MED_HORDE_SPEED
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_MordorForgedBlades
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_MordorHeavyArmor
	End

	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate ArnorFighterHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate ArnorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate ArnorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate ArnorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End
	
	CommandSet = ImperialSoldierHordeCommandSet

	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 45.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
	
	
	//-------------------------------------------------------------------------------------------------
	// World Map specific data
	//-------------------------------------------------------------------------------------------------
	
	// *** AUTO RESOLVE DATA ***
	AutoResolveUnitType = AutoResolveUnit_Soldier
	AutoResolveCombatChain = AutoResolve_SoldierCombatChain
	
	AutoResolveBody = AutoResolve_ArnorFighterHordeBody

	AutoResolveArmor
		RequiredUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_ArnorSoldierHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_ArnorSoldierArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_ArnorSoldierUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_ArnorSoldierWeapon
	End

	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorForgedBlades Upgrade_MordorHeavyArmor
End



//------------------------------------------------------------------------------
ChildObject MordorBlackOrcHordeBlock MordorBlackOrcHorde

	// Note - for alternate formations, all info outside of the Contain Behavior module is ignored.
	// Any modifications need to be done via the Attribute Modifiers in the contain module. 
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle			= 270
		FlankedDelay			= 2000
		ObjectStatusOfContained		= 
		InitialPayload			= ImperialSoldier BFA_GOOD_MEN_GIANT_HORDE_SIZE
		Slots				= 15
		PassengerFilter			= NONE +INFANTRY
		ShowPips			= No
		ThisFormationIsTheMainFormation = No				//Used to determine which armorset to use (and anything else we want!)
		AttributeModifiers		= ArnorFighterBlock
		RandomOffset			= X:0 Y:0
		MeleeBehavior 			= Amoeba
		End
		
		// Banner Carrier info		
		BannerCarriersAllowed	= ImperialInfantryBanner										// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:ImperialSoldier	Pos:X:46.0 Y:0.0		// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:ImperialSoldier Position:X:34 Y:0			Position:X:34 Y:10				Position:X:34 Y:-10				Position:X:34 Y:20				Position:X:34 Y:-20
		RankInfo = RankNumber:2 UnitType:ImperialSoldier Position:X:22 Y:0 Leader 1 0	Position:X:22 Y:10 Leader 1 1	Position:X:22 Y:-10 Leader 1 2	Position:X:22 Y:20 Leader 1 3	Position:X:22 Y:-20 Leader 1 4
		RankInfo = RankNumber:3 UnitType:ImperialSoldier Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:10 Leader 2 1	Position:X:10 Y:-10 Leader 2 2	Position:X:10 Y:20 Leader 2 3	Position:X:10 Y:-20 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1
				
		AlternateFormation = MordorBlackOrcHorde
		MeleeAttackLeashDistance 	= 1   				// How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		= 1				// The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		= 3000				// The maximum amount of	time to	delay before backing up
		BackUpMinDistance		= 1				// The minimum number of	cells to backup
		BackUpMaxDistance		= 3				// The maximum number of	cells to backup
		BackupPercentage		= 80%				// The amount of	chance that	a unit will	back up.		
	End
End

ChildObject MordorBlackOrcHorde_Summoned MordorBlackOrcHorde
	IsTrainable	  =	No
	CommandPoints =	0
	CommandSet	  =	MordorFighterHordeCommandSet_Summoned
	EquivalentTo  =	MordorBlackOrcHorde

	DisplayName = OBJECT:HordeMordorOrcs
	
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = MordorFighter_Summoned 20
		Slots = 20
		PassengerFilter = ANY +INFANTRY +MONSTER
		ShowPips = No
		
		RandomOffset=X:5 Y:3	
		
		MeleeBehavior = Amoeba
		End
		
		RankInfo = RankNumber:1 UnitType:MordorFighter_Summoned Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:MordorFighter_Summoned Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:MordorFighter_Summoned Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		RankInfo = RankNumber:3 UnitType:MordorFighter_Summoned Position:X:-10 Y:0 Leader 3 0	Position:X:-10 Y:20 Leader 3 1	Position:X:-10 Y:-20 Leader 3 2	Position:X:-10 Y:40 Leader 3 3	Position:X:-10 Y:-40 Leader 3 4
		
		RanksToReleaseWhenAttacking = 1
		
		MeleeAttackLeashDistance = 1; How far the hordes can move from the center of the horde when melee attacking.
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	// This one displays the timer, but the one in the uint does the work 
		MinLifetime		= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		MaxLifetime		= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		DeathType		= FADED
	End	

End

//-----------------------------------------------------------------------------------------------------------------

Object MordorHaradrimArcherHorde

	// This is required for garrisoned objects - please put in all objects.
	SelectPortrait						=	up_imparcher
	ButtonImage						=	ub_imparcher

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_TAUNTING EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED  EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None //InvisHrdeTmp5x2
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkGUArc
		End
	End
	
	Side = Mordor
	EditorSorting = UNIT
	EmotionRange = 240
	DisplayName = OBJECT:HordeImperialArcher
	DisplayNameStrategic = CONTROLBAR:LW_Unit_ImperialArcherHorde
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_ImperialArcherHorde
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    GoodArcherMissileHordeRangefinder
		Weapon = TERTIARY    GoodArcherMissileHordeRangefinderBombard
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End

	// *** AUDIO Parameters ***
	// Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	// are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"


	BuildCost = BFA_MORDOR_HARADRIM_BUILDCOST
	BuildTime = BFA_MORDOR_HARADRIM_BUILDTIME
	VisionRange = BFA_GONDOR_ARCHER_HORDE_VISION_RANGE 
	ShroudClearingRange = BFA_GONDOR_ARCHER_HORDE_SHROUD_RANGE 
	VisionSide = 50%
	VisionRear = 25%
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1%
	CommandPoints = 60
		
	FormationWidth = 2 // Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth = 1 // Depth it occupies in formations. Current choices are 1 or 2.
	
 	CrushableLevel = 0  //What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0
	UseCrushAttack = No	;Archer hordes cannot crush or Bombard will not work

    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARCHER ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND// UNATTACKABLE
	;KindOf = SELECTABLE CAN_ATTACK INFANTRY HORDE ARCHER ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND// UNATTACKABLE
	
	ThreatLevel = BFA_GONDOR_ARCHER_HORDE_THREAT
	ThreatBreakdown ArnorArcherHorde_DetailedThreat
		AIKindOf = ARCHER
	End
	
	CommandSet = ImperialArcherHordeCommandSet
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End

	#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = ArcherHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	=	Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			=	500
		MaxCowerTime				=	5000
		MinCowerTime				=	3000
		CanAttackWhileContained		=	Yes  // Can fire out of garrisoned building		
		AILuaEventsList				=	InfantryFunctions
		AttackPriority				= 	AttackPriority_Archer
	End
	
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = ImperialArcher BFA_GOOD_MEN_GIANT_HORDE_SIZE
		Slots = 15
		PassengerFilter	= NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset=X:0 Y:0
		MeleeBehavior = Amoeba
		End

		// Banner Carrier info		
		BannerCarriersAllowed	= ImperialInfantryBanner										// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:ImperialArcher	Pos:X:70.0 Y:0.0		// (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:ImperialArcher Position:X:50 Y:0			Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:ImperialArcher Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:ImperialArcher Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1 2 3 

		MeleeAttackLeashDistance = 1   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		 = 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		 = 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		 = 1	//The minimum number of	cells to backup
		BackUpMaxDistance		 = 3	//The maximum number of	cells to backup
		BackupPercentage		 = 80%	//The amount of	chance that	a unit will	back up.
	End

	
	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		// max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	// how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
 		AfraidOf					=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt						=	BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	 BFA_ARCHER_FEAR_SCAN_RADIUS

		AddEmotion			=	Terror_Base			//OVERRIDE
			//StartFXList		=	FX_ArnorArcherTerror
			//End

		AddEmotion			=	Doom_Base			//OVERRIDE
			//StartFXList		=	FX_ArnorArcherDoom
			//End

		AddEmotion	=   BraceForBeingCrushed_Base
		
		AddEmotion			=	UncontrollableFear_Base		//OVERRIDE
			//StartFXList		=	FX_ArnorArcherFear
			//End

		AddEmotion			=	FearIdle_Base			//OVERRIDE
			//StartFXList		=	FX_ArnorArcherCower
			//End
		
		AddEmotion			=	FearBusy_Base			//OVERRIDE
			//StartFXList		=	FX_ArnorArcherCower
			//End
		
		AddEmotion			=	Point_Base			//OVERRIDE
			//Duration		=	4000
			//StartFXList		=	FX_ArnorArcherPoint
			//End
		
		AddEmotion			=	Taunt_Base			//OVERRIDE
 			//AttributeModifier	=	ArnorFighterTaunt
	 		//End		
 		
 		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_MordorFireArrows
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_MordorHeavyArmor
	End
	
	//Barbed Arrows
	Behavior = SpecialPowerModule ModuleTag_LongShot
		SpecialPowerTemplate		= SpecialAbilityHaradrimArcherBarbedArrow
		UpdateModuleStartsAttack	= Yes
		StartsPaused		  	= No
		;InitiateSound			= HaradrimVoiceAttackCharge	;this didn't work
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate   
		SpecialPowerTemplate    	= SpecialAbilityHaradrimArcherBarbedArrow
		; this has to be longer than the weapon firing time on the members or
		; else the horde will fire its regular weapon and blow away the members' ai.
		PackTime			= 3000										
		StartAbilityRange		= #SUBTRACT( MORDOR_HARADRIM_BOW_RANGE 100 )
		SpecialWeapon			= HaradrimBarbedArrowRangeFinder
		ApproachUntilMembersInRange	= Yes
	End
	
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
		SpecialAbility = SpecialAbilityHaradrimArcherBarbedArrow
	End

	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End
	
	LocomotorSet
		Locomotor     = NormalRangedHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_SLOW_HORDE_SPEED
	End
	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate ArnorArcherHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 45.0
	GeometryHeight = 20.0
	GeometryIsSmall = No


	// *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Archer
	AutoResolveCombatChain = AutoResolve_ArcherCombatChain
	
	AutoResolveBody = AutoResolve_ArnorArcherHordeBody

	AutoResolveArmor
		RequiredUpgrades = Upgrade_ArnorHeavyArmor
		Armor = AutoResolve_ArnorArcherHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_ArnorHeavyArmor
		Armor = AutoResolve_ArnorArcherArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_ArnorFireArrows
		Weapon = AutoResolve_ArnorArcherUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_ArnorFireArrows
		Weapon = AutoResolve_ArnorArcherWeapon
	End
	
	WorldMapArmoryUpgradesAllowed = Upgrade_ArnorBasicTraining Upgrade_ArnorFireArrows Upgrade_ArnorHeavyArmor	
End

ChildObject MordorHaradrimArcherHorde_Summoned MordorHaradrimArcherHorde
	IsTrainable	  =	No
	CommandPoints =	0
	CommandSet	  =	ImperialArcherHordeCommandSet_Summoned
	EquivalentTo  =	MordorHaradrimArcherHorde

	DisplayName = OBJECT:HordeImperialArcher
	
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = ImperialArcher_Summoned BFA_GOOD_MEN_GIANT_HORDE_SIZE
		Slots = 15
		PassengerFilter	= NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = Yes	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset=X:0 Y:0
		MeleeBehavior = Amoeba
		End

		RankInfo = RankNumber:1 UnitType:ImperialArcher_Summoned Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:ImperialArcher_Summoned Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:ImperialArcher_Summoned Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1 2 3 

		MeleeAttackLeashDistance = 1   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		 = 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		 = 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		 = 1	//The minimum number of	cells to backup
		BackUpMaxDistance		 = 3	//The maximum number of	cells to backup
		BackupPercentage		 = 80%	//The amount of	chance that	a unit will	back up.
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	// This one displays the timer, but the one in the uint does the work 
		MinLifetime	= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		MaxLifetime	= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		DeathType	= FADED
	End	
End

//----------------------------------------------------------------------------------------------------------------------------------------------------
Object MordorHaradrimRiderHorde 

	// This is required for garrisoned objects - please put in all objects.
	ButtonImage		= ub_impknight
	SelectPortrait		= up_impknight

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model 	= None //InvisHrdeTmp5x1
		End
		ModelConditionState = HORDE_EMPTY
			Model 	= None
		End		
		ModelConditionState = WORLD_BUILDER
			Model 	= HordeMarkGUKni
		End
	End
	
	Side 			= Mordor
	EditorSorting 		= UNIT
	EmotionRange 		= 240
	DisplayName 		= OBJECT:HordeImperialKnight
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_ImperialKnightHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_ImperialKnightHorde
	
	WeaponSet
		Conditions 	= None 
		Weapon 		= PRIMARY    NormalMeleeHordeRangefinder
	End
	
	CommandSet 		= ImperialKnightHordeCommandSet


	// *** AUDIO Parameters ***//
	// Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	// are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	BuildCost 			= BFA_GONDOR_KNIGHT_BUILDCOST
	BuildTime 			= BFA_GONDOR_KNIGHT_BUILDTIME  
	VisionRange 			= BFA_GONDOR_KNIGHT_HORDE_VISION_RANGE
	VisionSide 			= 35%
	VisionRear 			= 25%
	MaxVisionBonusPercent		= 300%
	VisionBonusTestRadius		= 200
	VisionBonusPercentPerFoot 	= 5.0%
	ShroudClearingRange 		= BFA_GONDOR_KNIGHT_HORDE_SHROUD_RANGE	
	
	CommandPoints 			= 60
		  
	FormationWidth 			= 2 				// Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 			= 1 				// Depth it occupies in formations. Current choices are 1 or 2.
	
	CrushableLevel 			= 2  				// What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 			= 1 
	MinCrushVelocityPercent 	= 50% 				// Has to be moving at at least 25% of full speed.
	CrushDecelerationPercent 	= 50 				// Lose 10 percent (100/5 horde members) of max velocity when crushing.
	CrushKnockback 			= 40  				// how hard we knock back crushed units.
	CrushZFactor 			= 1.0  				// How much we knock upwards.
		
	
    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAVALRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND//UNATTACKABLE 
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	ThreatLevel = BFA_GONDOR_KNIGHT_HORDE_THREAT
	ThreatBreakdown GondorKnightHorde_DetailedThreat
		AIKindOf = CAVALRY
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = CavalryHorde
    End
    
	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AILuaEventsList			= CavalryFunctions  
		AttackPriority			= AttackPriority_Cavalry
	End

	Behavior = HorseHordeContain ModuleTag_HordeContain
		
		FrontAngle 			= 270
		FlankedDelay 			= 2000
		ObjectStatusOfContained 	= 
		InitialPayload 			= ImperialKnight  BFA_GOOD_RIDER_LARGE_HORDE_SIZE
		Slots 				= 10
		PassengerFilter 		= NONE +CAVALRY +ArnorCavalryBanner
		ShowPips 			= No
		ThisFormationIsTheMainFormation = Yes	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset			= X:0 Y:0
		MeleeBehavior			= Amoeba
		End

		// Banner Carrier info		
		BannerCarriersAllowed		= ImperialKnightBanner					// types of units that are allowed as banner carriers
		BannerCarrierPosition		= UnitType:ImperialKnight	Pos:X:70.0 Y:0.0		// (DEFAULT) position of banner carrier for archer horde
		
		RankInfo = RankNumber:1 UnitType:ImperialKnight Position:X:40 Y:0		Position:X:40 Y:20		Position:X:40 Y:-20		Position:X:40 Y:40		Position:X:40 Y:-40 
		RankInfo = RankNumber:2 UnitType:ImperialKnight Position:X:10 Y:0 Leader 1 0	Position:X:10 Y:20 Leader 1 1	Position:X:10 Y:-20 Leader 1 2	Position:X:10 Y:40 Leader 1 3	Position:X:10 Y:-40 Leader 1 4
		
		RanksToReleaseWhenAttacking 	= 1 

		MeleeAttackLeashDistance 	= 1   				// How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		= 1				// The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		= 3000				// The maximum amount of	time to	delay before backing up
		BackUpMinDistance		= 1				// The minimum number of	cells to backup
		BackUpMaxDistance		= 3				// The maximum number of	cells to backup
		BackupPercentage		= 80%				// The amount of	chance that	a unit will	back up.	
	End
	
	
	

	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
		ScanWidth = 70.0 ; A little less than the width of the horde (which is 2 * 40 = 80)
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
    Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		// max distance to taunted/pointed objet
 		TauntAndPointUpdateDelay	=	1000					// how often scan (milliseconds)
 		TauntAndPointExcluded		=	NONE
 		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
 		HeroScanDistance		=	150
 		FearScanDistance		=	BFA_INFANTRY_FEAR_SCAN_RADIUS
 		
		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   	BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		AddEmotion			=	FearIdle_Base
		AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=   	CheerForAboutToCrush_Base
 	End	
    
	LocomotorSet
		Locomotor     = NormalCavalryHordeLocomotor 
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_MOUNTED_SLOW_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_MordorForgedBlades
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_MordorHeavyArmor
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality3
		TriggeredBy = Upgrade_ArnorKnightShield
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End
	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate GondorKnightHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 40.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
	
	
	// *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Cavalry
	AutoResolveCombatChain = AutoResolve_CavalryCombatChain

	AutoResolveBody = AutoResolve_ArnorKnightHordeBody

	AutoResolveArmor
		RequiredUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_ArnorKnightHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_ArnorKnightArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_ArnorKnightUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_ArnorKnightWeapon
	End
	
	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorForgedBlades Upgrade_MordorHeavyArmor
End

//////////////////////////////////////////////////////////////////////////////////
ChildObject MordorHaradrimRiderHorde_Summoned MordorHaradrimRiderHorde 
	IsTrainable 		= No
	CommandPoints 		= 0
	CommandSet 		= ImperialKnightHordeCommandSet_Summoned
	EquivalentTo 		= ImperialKnightHorde

	DisplayName 		= OBJECT:HordeImperialKnight

	Behavior 		= HorseHordeContain ModuleTag_HordeContain
		
		FrontAngle 			= 270
		FlankedDelay 			= 2000
		ObjectStatusOfContained 	= 
		InitialPayload 			= ImperialKnight_Summoned BFA_GOOD_RIDER_LARGE_HORDE_SIZE
		Slots 				= 10
		PassengerFilter 		= NONE +CAVALRY +ArnorCavalryBanner
		ShowPips 			= No
		ThisFormationIsTheMainFormation = Yes				// Used to determine which armorset to use (and anything else we want!)
		RandomOffset			= X:0 Y:0
		MeleeBehavior 			= Amoeba
		End

		RankInfo = RankNumber:1 UnitType:ImperialKnight_Summoned Position:X:40 Y:0		Position:X:40 Y:15		Position:X:40 Y:-15		Position:X:40 Y:30		Position:X:40 Y:-30 
		RankInfo = RankNumber:2 UnitType:ImperialKnight_Summoned Position:X:10 Y:0 Leader 1 0	Position:X:10 Y:15 Leader 1 1	Position:X:10 Y:-15 Leader 1 2	Position:X:10 Y:30 Leader 1 3	Position:X:10 Y:-30 Leader 1 4
		
		RanksToReleaseWhenAttacking 	= 1 

		MeleeAttackLeashDistance 	= 1   				// How far the hordes	can	move from the center of	the	horde when melee attacking.				  
		BackUpMinDelayTime		= 1				// The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		= 3000				// The maximum amount of	time to	delay before backing up
		BackUpMinDistance		= 1				// The minimum number of	cells to backup
		BackUpMaxDistance		= 3				// The maximum number of	cells to backup
		BackupPercentage		= 80%				// The amount of	chance that	a unit will	back up.	
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	// This one displays the timer, but the one in the uint does the work 
		MinLifetime		= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		MaxLifetime		= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		DeathType		= FADED
	End	
End





;////////////////////////////////////////////////////////////////////////////////
ChildObject MordorArcherHordeForBlackGate MordorHaradrimArcherHorde
  Behavior = HordeContain ModuleTag_HordeContain
		ObjectStatusOfContained = 
		InitialPayload = MordorArcherForBlackGate 12
		Slots = 12
		PassengerFilter = NONE +INFANTRY +MordorBannerOrc
		ShowPips = No

		; Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc			; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorArcherForBlackGate	Pos:X:60.0 Y:0.0	;(DEFAULT) position of banner carrier for archer horde

		RandomOffset=X:9 Y:9	
		RankInfo = RankNumber:1 UnitType:MordorArcherForBlackGate Position:X:45 Y:0 Position:X:45 Y:17 Position:X:45 Y:-17 Position:X:45 Y:50 
		RankInfo = RankNumber:2 UnitType:MordorArcherForBlackGate Position:X:17 Y:0 Position:X:17 Y:35 Position:X:17 Y:-35 Position:X:17 Y:55 
		RankInfo = RankNumber:3 UnitType:MordorArcherForBlackGate Position:X:-17 Y:0 Position:X:-17 Y:35 Position:X:-17 Y:-35 Position:X:-17 Y:55 
		
		RanksToReleaseWhenAttacking = 1 2 3
		
	End

End


;;------------------------------------------------------------------------------
;;--------JDG 4/29/04 adding a new unit -- OrcScout -- Used in Evil Shelob-----
;;------------------------------------------------------------------------------
Object MordorOrcScout_Horde

  	; This is required for garrisoned objects - please put in all objects.
	SelectPortrait = UPMordor_OrcHorde 

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkIUPik
		End
	End
	
	Side 		= Mordor
	EditorSorting 	= UNIT
	;Browser 	= UNIT
	EmotionRange 	= 240
	DisplayName 	= OBJECT:Horde
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    None
	End

	BuildCost 	= 600
	BuildTime 	= 10.0      
	VisionRange 	= 121
	CrushableLevel 	= 0  	; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 	= 0 	; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles 
	CommandPoints 	= 2
	CommandSet 	= MordorOrcScout_HordeCommandSet
		
	FormationWidth = 1 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth = 1 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_LARGE_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_USE_SIEGE_TOWER INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND ;UNATTACKABLE 
	
	ThreatLevel = BFA_MORDOR_ORC_SCOUT_HORDE_THREAT
	ThreatBreakdown MordorOrcScoutHorde_DetailedThreat
		AIKindOf = INFANTRY
	End
	
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle 	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        	= 500
		AILuaEventsList			= InfantryFunctions
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		
	End

	Behavior = HordeContain ModuleTag_HordeContain
		ObjectStatusOfContained = 
		InitialPayload = MordorOrcScout_Unit 2
		Slots = 2
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		RandomOffset=X:4 Y:4
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		
		RankInfo = RankNumber:1 UnitType:MordorOrcScout_Unit Position:X:27 Y:1	Position:X:30 Y:18		Position:X:28 Y:-21		Position:X:30 Y:38		Position:X:30 Y:-37 
		RankInfo = RankNumber:2 UnitType:MordorOrcScout_Unit Position:X:9 Y:2		Position:X:8 Y:19		Position:X:10 Y:-22		Position:X:11 Y:39		Position:X:10 Y:-39 
		RankInfo = RankNumber:3 UnitType:MordorOrcScout_Unit Position:X:-10 Y:-1	Position:X:-12 Y:22		Position:X:-10 Y:-18	Position:X:-11 Y:40		Position:X:-8 Y:-40 
		RankInfo = RankNumber:4 UnitType:MordorOrcScout_Unit Position:X:-28 Y:0	Position:X:-30 Y:21		Position:X:-29 Y:-20	Position:X:-30 Y:39		Position:X:-30 Y:-38 

		
		RanksToReleaseWhenAttacking = 1 2 3 4
	End
	
	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf					=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf				=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt						=	BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance			=	150
		FearScanDistance			=	BFA_INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End	

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_FAST_HORDE_SPEED
	End

	Geometry = BOX
	GeometryMajorRadius = 30.4
	GeometryMinorRadius = 30.4
	GeometryHeight = 8.0
	GeometryIsSmall = No
End

;////////////////////////////////////////////////////////////////////////////////
ChildObject MordorGoblinArcherHorde MordorHaradrimArcherHorde
 Behavior = HordeContain ModuleTag_HordeContain
		ObjectStatusOfContained = 
		InitialPayload = MordorGoblinArcher BFA_ORC_HORDE_SIZE
		Slots = 10
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		RandomOffset=X:9 Y:9

		RankInfo = RankNumber:1 UnitType:MordorGoblinArcher Position:X:40 Y:0 Position:X:40 Y:12			Position:X:40 Y:-12	Position:X:40 Y:45		Position:X:40 Y:-45 
		RankInfo = RankNumber:2 UnitType:MordorGoblinArcher Position:X:12 Y:0	Position:X:12 Y:30		Position:X:12 Y:-30	Position:X:12 Y:50		Position:X:12 Y:-50 

		RanksToReleaseWhenAttacking = 1 2

	End
End

;////////////////////////////////////////////////////////////////////////////////

Object MordorGoblinFighterHorde

  	; This is required for garrisoned objects - please put in all objects.
  	
	ButtonImage = BMOrcPit_Horde

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkMUSol
		End
	End
	
	Side          	= Mordor
	IsTrainable	= No
	EditorSorting 	= UNIT
	EmotionRange  	= 240
	DisplayName  	= OBJECT:HordeMoriaGoblin
	
	WeaponSet
		Conditions 	= None 
		Weapon 		= PRIMARY    NormalMeleeHordeRangefinder
	End

	
; *** AUDIO Parameters ***;

	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"


	BuildCost		= 0
	BuildTime		= 20.0      
	VisionRange		= 250
	CrushableLevel		= 0		;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel		= 0		;What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles 
	CommandPoints		= 10
	CommandSet		= MordorGoblinFighterHordeCommandSet
	FormationWidth 		= 2 		; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 2 		; Depth it occupies in formations. Current choices are 1 or 2.
	
    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_LARGE_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_USE_SIEGE_TOWER INFANTRY HORDE ORC MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND
	
	ThreatLevel = BFA_MORDOR_GOBLINFIGHTER_HORDE_THREAT
	ThreatBreakdown MordorGoblinFighterHorde_DetailedThreat
		AIKindOf = INFANTRY
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End

	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle 	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        	= 500
		AILuaEventsList			= InfantryFunctions
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
        AILuaEventsList				= InfantryFunctions
		AttackPriority			= AttackPriority_Infantry
	End

	Behavior = HordeContain ModuleTag_HordeContain
		ObjectStatusOfContained 	= 
		InitialPayload			= MordorGoblinSwordsman BFA_ORC_HORDE_SIZE
		Slots				= 10
		PassengerFilter 		= ANY +INFANTRY +MONSTER
		ShowPips			= No
		RandomOffset			= X:5 Y:5
			
		RankInfo = RankNumber:1 UnitType:MordorGoblinSwordsman Position:X:20 Y:-23  Position:X:20 Y:0  Position:X:20 Y:24  
		RankInfo = RankNumber:2 UnitType:MordorGoblinSwordsman Position:X:0 Y:-20  Position:X:0 Y:0  Position:X:0 Y:20  
		RankInfo = RankNumber:3 UnitType:MordorGoblinSwordsman Position:X:-20 Y:-26  Position:X:-20 Y:-10  Position:X:-20 Y:10  Position:X:-20 Y:21  
		RanksToReleaseWhenAttacking = 1 2 3

		MeleeAttackLeashDistance = 50; How far the hordes can move from the center of the horde when melee attacking.
		
	End
	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		= BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	= 1000					; how often scan (milliseconds)
		TauntAndPointExcluded		= NONE
		AfraidOf			= BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			= BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				= BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		= 150
		FearScanDistance		= BFA_INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   	BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly 	= Yes
		StuffToPickUp 	= NONE +CRATE
		ScanRange 	= 200
		ScanIntervalSeconds = 0.5
	End	
	
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_FAST_HORDE_SPEED
	End
	
	Geometry = BOX
	GeometryMajorRadius = 25.0
	GeometryMinorRadius = 35.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
	
End

;////////////////////////////////////////////////////////////////////////////////

Object MordorCorsairsOfUmbarHorde

   ButtonImage     = WOR_Corsair
   SelectPortrait  = UPMordor_Corsair

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkMUCor
		End
	End
	
	Side 			= Mordor
	EditorSorting 		= UNIT
	EmotionRange 		= 240
	DisplayName 		= OBJECT:HordeCorsairsOfUmbar
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_MordorCorsairsOfUmbarHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorCorsairsOfUmbarHorde
	
	WeaponSet
		Conditions 	= None 
		Weapon 		= PRIMARY	NormalMeleeHordeRangefinder
	End
	
	WeaponSet
		Conditions 	= WEAPONSET_TOGGLE_1
		Weapon 		= PRIMARY	CorsairFireBombMissileHordeRangefinder
		Weapon 		= TERTIARY	CorsairFireBombMissileHordeRangefinderBombard
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End

	BuildCost 		= BFA_MORDOR_CORSAIR_BUILDCOST      	
	BuildTime 		= BFA_MORDOR_CORSAIR_BUILDTIME
	     
	ShroudClearingRange 	= BFA_MORDOR_CORSAIR_HORDE_SHROUDCLEAR_RANGE
	VisionRange 		= BFA_MORDOR_CORSAIR_HORDE_VISION_RANGE 
	VisionSide 		= 50%
	VisionRear 		= 25%
	VisionBonusPercentPerFoot = 1.0%
	
	CrushableLevel 		= 0  			; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 		= 0 			; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles 
	CommandPoints 		= 60
	CommandSet 		= MordorCorsairsOfUmbarHordeCommandSet
		
	FormationWidth 		= 2 			; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 2 			; Depth it occupies in formations. Current choices are 1 or 2.
	
	TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND ;UNATTACKABLE 
	
	ThreatLevel = BFA_MORDOR_CORSAIRSOFUMBAR_HORDE_THREAT
	ThreatBreakdown MordorCorsairsOfUmbarHorde_DetailedThreat
		AIKindOf = INFANTRY
	End
	
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle 	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        	= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AILuaEventsList			= InfantryFunctions  
	End

	Behavior = HordeContain ModuleTag_HordeContain
		ObjectStatusOfContained = 
		InitialPayload 		= MordorCorsairsOfUmbar BFA_EVIL_MEN_BIG_HORDE_SIZE
		Slots 			= 15
		PassengerFilter 	= NONE +INFANTRY
		ShowPips 		= No
		RandomOffset		= X:3 Y:3
		MeleeBehavior 		= Amoeba
		End
		
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		
		; Banner Carrier info		
		BannerCarriersAllowed	= MordorCorsairBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorCorsairsOfUmbar	Pos:X:70.0 Y:0.0		; (DEFAULT) position of banner carrier
		
		RankInfo = RankNumber:1 UnitType:MordorCorsairsOfUmbar Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:MordorCorsairsOfUmbar Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:MordorCorsairsOfUmbar Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		
		RanksToReleaseWhenAttacking = 1 2 3 
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		= BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	= 1000					; how often scan (milliseconds)
		TauntAndPointExcluded		= NONE
		AfraidOf			= BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			= BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				= BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		= 150
		FearScanDistance		= BFA_INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   	BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
	End		
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly 	= Yes
		StuffToPickUp 	= NONE +CRATE
		ScanRange 	= 200
		ScanIntervalSeconds = 0.5
	End
	
	LocomotorSet
		Locomotor     = WallScalingMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_FAST_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_MordorForgedBlades
	End
	
	Behavior = MonitorConditionUpdate MonitorConditionUpdateModuleTag
		WeaponSetFlags		= WEAPONSET_TOGGLE_1
		WeaponToggleCommandSet	= MordorCorsairsOfUmbarHordeFireBombCommandSet
	End

	#include "..\..\..\includes\CaptureBuilding.inc"
	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate MordorCorsairsOfUmbarHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Geometry 		= BOX
	GeometryMajorRadius 	= 30.0
	GeometryMinorRadius	= 50.0
	GeometryHeight 		= 10.0
	GeometryIsSmall 	= No
	
	
	// *** AUTO RESOLVE DATA ***
	AutoResolveUnitType = AutoResolveUnit_Soldier
	AutoResolveCombatChain = AutoResolve_SoldierCombatChain
	
	AutoResolveBody = AutoResolve_MordorCorsairsOfUmbarHordeBody

	AutoResolveArmor
		Armor = AutoResolve_MordorCorsairsOfUmbarArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_MordorCorsairsOfUmbarUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_MordorCorsairsOfUmbarWeapon
	End
	
	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorForgedBlades
End

;////////////////////////////////////////////////////////////////////////////////
ChildObject MordorCorsairsOfUmbarHordeInn MordorCorsairsOfUmbarHorde
	BuildCost = BFA_INN_UNIT_BUILDCOST_MORDOR
	BuildTime = BFA_MORDOR_CORSAIR_INN_BUILDTIME
End

;////////////////////////////////////////////////////////////////////////////////
ChildObject MordorCorsairsOfUmbarHordeFree MordorCorsairsOfUmbarHorde
	BuildCost = 0
	BuildTime = BFA_MORDOR_CORSAIR_INN_BUILDTIME
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE LARGE_RECTANGLE_PATHFIND
End

;////////////////////////////////////////////////////////////////////////////////
ChildObject WildCorsairsOfUmbarHordeInn MordorCorsairsOfUmbarHorde
	BuildCost = BFA_INN_UNIT_BUILDCOST_WILD
	BuildTime = BFA_MORDOR_CORSAIR_INN_BUILDTIME
	
	CommandSet	= WildCorsairsOfUmbarHordeCommandSet
	
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy	= Upgrade_WildBasicTraining
		LevelsToGain	= 1
		LevelCap	= 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality3
		TriggeredBy = Upgrade_WildForgedBlades
	End
	
	Behavior = MonitorConditionUpdate MonitorConditionUpdateModuleTag
		WeaponSetFlags		= WEAPONSET_TOGGLE_1
		WeaponToggleCommandSet	= WildCorsairsOfUmbarHordeFireBombCommandSet
	End

	WorldMapArmoryUpgradesAllowed = Upgrade_WildBasicTraining Upgrade_WildForgedBlades
End

;////////////////////////////////////////////////////////////////////////////////
ChildObject WildCorsairsOfUmbarHordeFree MordorCorsairsOfUmbarHorde
	BuildCost = 0
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE LARGE_RECTANGLE_PATHFIND
	
	CommandSet	= WildCorsairsOfUmbarHordeCommandSet
	
	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy	= Upgrade_WildBasicTraining
		LevelsToGain	= 1
		LevelCap	= 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality3
		TriggeredBy = Upgrade_WildForgedBlades
	End
	
	Behavior = MonitorConditionUpdate MonitorConditionUpdateModuleTag
		WeaponSetFlags		= WEAPONSET_TOGGLE_1
		WeaponToggleCommandSet	= WildCorsairsOfUmbarHordeFireBombCommandSet
	End
End


;////////////////////////////////////////////////////////////////////////////////
Object MordorArcherHorde

  ; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= ub_eubowman
	SelectPortrait	= up_eubowman

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkRUYeo
		End
	End
	
	Side = Mordor
	EditorSorting = UNIT
	EmotionRange = 240
	DisplayName = OBJECT:HordeEmpireBowman
	DisplayNameStrategic = CONTROLBAR:LW_Unit_EmpireBowmanHorde
	DescriptionStrategic = CONTROLBAR:LW_ToolTipBuild_EmpireBowmanHorde
	
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NormalMissileHordeRangefinder
		Weapon = TERTIARY   NormalMissileHordeRangefinderBombard
		AutoChooseSources = TERTIARY FROM_PLAYER FROM_SCRIPT				; Not AI.
	End
	
	CommandSet =  EmpireBowmanCommandSet

	; *** AUDIO Parameters ***
	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"


 	CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel = 0
	UseCrushAttack = No	;Archer hordes cannot crush or Bombard will not work

	BuildCost = BFA_MORDOR_ARCHER_BUILDCOST		; originally ROHAN_YEOMAN_BUILDCOST				
	BuildTime = BFA_MORDOR_ARCHER_BUILDTIME		; originally ROHAN_YEOMAN_BUILDTIME
					
	VisionRange = BFA_MORDOR_ARCHER_HORDE_VISION_RANGE	; ROHAN_YEOMAN_HORDE_VISION_RANGE
	ShroudClearingRange = BFA_MORDOR_ARCHER_SHROUD_RANGE

	VisionSide = 50%
	VisionRear = 25%
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%
	
	CommandPoints = 72		; originally 60
	
	FormationWidth = 2 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth = 2 ; Depth it occupies in formations. Current choices are 1 or 2.
	
    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_LARGE_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARCHER ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND CAN_CLIMB_WALLS
	
	ThreatLevel = BFA_MORDOR_ARCHER_HORDE_THREAT
	ThreatBreakdown MordorArcherHorde_DetailedThreat
		AIKindOf = ARCHER
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End

	#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = ArcherHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		CanAttackWhileContained		= Yes  			; Can fire out of garrisoned building	
        AILuaEventsList				= InfantryFunctions  
        AttackPriority				= AttackPriority_Archer      
	End

	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload 	= EmpireBowman 20
		Slots 		= 20
		PassengerFilter = NONE +INFANTRY
		ShowPips 	= No
;		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		MeleeBehavior 	= Amoeba
		End

		; Banner Carrier info		
		BannerCarriersAllowed	= ImperialInfantryBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:EmpireBowman		Pos:X:40.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		; Positions for 5
		RandomOffset = X:0 Y:-12
		
		RankInfo = RankNumber:1 UnitType:EmpireBowman Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:EmpireBowman Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:EmpireBowman Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		RankInfo = RankNumber:3 UnitType:EmpireBowman Position:X:-10 Y:0 Leader 3 0	Position:X:-10 Y:20 Leader 3 1	Position:X:-10 Y:-20 Leader 3 2	Position:X:-10 Y:40 Leader 3 3	Position:X:-10 Y:-40 Leader 3 4
		
		RanksToReleaseWhenAttacking = 1 2 3 4
				
		MeleeAttackLeashDistance = 25   //How far the hordes	can	move from the center of	the	horde when melee attacking.				  
End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt				=	EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	CAVALRY_FEAR_SCAN_RADIUS

		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   	BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		AddEmotion			=	FearIdle_Base
		AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
	End	
		
	LocomotorSet
		Locomotor     = NormalRangedHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_FOOT_MED_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_MordorFireArrows
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_MordorHeavyArmor
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End
	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate DwarvenMenOfDaleHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	Geometry = BOX
	GeometryMajorRadius = 20.0
	GeometryMinorRadius = 60.0
	GeometryHeight = 10.0
	GeometryIsSmall = No
	
	
	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Archer
	AutoResolveCombatChain = AutoResolve_ArcherCombatChain
	
	AutoResolveBody = AutoResolve_MordorArcherHordeBody
	
	AutoResolveArmor
		RequiredUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_MordorArcherArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorFireArrows
		Weapon = AutoResolve_MordorArcherUpgradedWeapon
	End

	
	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorFireArrows Upgrade_MordorHeavyArmor	
End

;////////////////////////////////////////////////////////////////////////////////

ChildObject MordorHaradrimArcherHordeOnMumakil MordorHaradrimArcherHorde
	Behavior = HordeContain ModuleTag_HordeContainOverride
		ObjectStatusOfContained = 
		InitialPayload = MordorHaradrimArcherMumakil 6
		Slots = 6
		PassengerFilter = NONE +INFANTRY
		ShowPips = No
		ThisFormationIsTheMainFormation = yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset=X:0 Y:0
		
		; Banner Carrier info		
		BannerCarriersAllowed	= MordorBannerOrc		; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorHaradrimArcherMumakil	Pos:X:50.0 Y:0.0	; (DEFAULT) position of banner carrier for archer horde
		
		
		RankInfo = RankNumber:1 UnitType:MordorHaradrimArcherMumakil Position:X:34 Y:8		Position:X:34 Y:-7		Position:X:34 Y:23		Position:X:34 Y:-22		Position:X:34 Y:38		Position:X:34 Y:-37
		
		
		MeleeAttackLeashDistance = 25; How far the hordes can move from the center of the horde when melee attacking.		
		RanksToReleaseWhenAttacking = 1
	End

	// Also do a level up if the Mumakil does
	Behavior = LevelUpUpgrade ModuleTag_MumakilLevelUp
		TriggeredBy			= Upgrade_MumakilLevel2
		LevelsToGain		= 1
		LevelCap			= 2
	End
End

;////////////////////////////////////////////////////////////////////////////////

Object MordorEasterlingHorde
  	; This is required for garrisoned objects - please put in all objects.
	ButtonImage	= ub_euguard
	SelectPortrait	= up_euguard

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkMUSol
		End
	End
	
	Side 			= Mordor
	EditorSorting 		= UNIT
	EmotionRange 		= 240
	TransportSlotCount 	= BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	DisplayName 		= OBJECT:HordeMordorEasterlings
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_MordorEasterlingHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorEasterlingHorde
	
	WeaponSet
		Conditions 	= None 
		Weapon 		= PRIMARY    TowerGuardHordeRangefinder
	End

	BuildCost = BFA_MORDOR_SOLDIERRHUN_BUILDCOST
	BuildTime = BFA_MORDOR_SOLDIERRHUN_BUILDTIME     
	
	ShroudClearingRange 	= BFA_MORDOR_SOLDIERRHUN_SHROUD_RANGE       
	VisionRange 		= BFA_MORDOR_SOLDIERRHUN_HORDE_VISION_RANGE
	
	VisionSide = 50%
	VisionRear = 25%
	
	MaxVisionBonusPercent 	= 300%
	VisionBonusTestRadius 	= 200
	VisionBonusPercentPerFoot = 1.0%
	
	CrushableLevel 		= 0  	; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 		= 0 	; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles 
	CommandPoints 		= 75	; originall 60
	CommandSet 		= MordorEasterlingHordeCommandSet
		
	FormationWidth 		= 2 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 2 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	TransportSlotCount 	= BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf 			= SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY CAN_USE_SIEGE_TOWER LARGE_RECTANGLE_PATHFIND PIKE;UNATTACKABLE 
	
	ThreatLevel 	= BFA_MORDOR_EASTERLING_HORDE_THREAT
	ThreatBreakdown MordorEasterlingHorde_DetailedThreat
		AIKindOf = PIKEMAN
	End
	
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"
	#include "..\..\..\includes\CaptureBuilding.inc"

	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = PikeHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle 	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        	= 500
		AILuaEventsList			= InfantryFunctions
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AttackPriority			= AttackPriority_Spearman
	End


	
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle 		= 270
		FlankedDelay 		= 2000
		ObjectStatusOfContained = 
		InitialPayload 		= MordorEasterling 15
		Slots 			= 15
		PassengerFilter		= NONE +INFANTRY
		ShowPips 		= No
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
		RandomOffset		= X:2 Y:2
		MeleeBehavior 		= Amoeba
		End

		; Banner Carrier info		
		BannerCarriersAllowed	= ImperialInfantryBanner					; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorEasterling	Pos:X:70.0 Y:0.0	; (DEFAULT) position of banner carrier
		
		; Positions for 5
		RankInfo = RankNumber:1 UnitType:MordorEasterling Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:MordorEasterling Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:MordorEasterling Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		RanksToReleaseWhenAttacking = 1 

		AlternateFormation 		= MordorEasterlingHordePorcupine
		MeleeAttackLeashDistance 	= 1		; How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime		= 1		; The minimum amount of time to delay before backing up
		BackUpMaxDelayTime		= 3000		; The maximum amount of time to delay before backing up
		BackUpMinDistance		= 1		; The minimum number of cells to backup
		BackUpMaxDistance		= 3		; The maximum number of cells to backup
		BackupPercentage		= 80%		; The amount of chance that a unit will back up.
	End
	
	

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		= BFA_INFANTRY_TAUNT_POINT_RADIUS	;350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	= 1000	; how often scan (milliseconds)
		TauntAndPointExcluded		= NONE
		AfraidOf			= BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			= BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				= BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		= 150
		FearScanDistance		= BFA_INFANTRY_FEAR_SCAN_RADIUS			; 250

		AddEmotion		= Terror_Base
		AddEmotion		= Doom_Base
		//AddEmotion		= BraceForBeingCrushed_Base		// Pikemen don't fear getting crushed
		AddEmotion		= UncontrollableFear_Base_Evil
		AddEmotion		= FearIdle_Base
		AddEmotion		= FearBusy_Base
		AddEmotion		= Point_Base

		AddEmotion		= OVERRIDE Taunt_Base	
 		;AttributeModifier	= GondorFighterTaunt
 		End		
		
		AddEmotion		= CheerIdle_Base
		AddEmotion		= CheerBusy_Base
		AddEmotion		= HeroCheerIdle_Base
		AddEmotion		= HeroCheerBusy_Base
		AddEmotion		= Alert_Base
	End		
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly 		= Yes
		StuffToPickUp 		= NONE +CRATE
		ScanRange 		= 200
		ScanIntervalSeconds 	= 0.5
	End
	
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_SLOW_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy	= Upgrade_MordorForgedBlades
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy	= Upgrade_MordorHeavyArmor
	End

	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate MordorEasterlingHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Geometry = BOX
	GeometryMajorRadius = 20.0
	GeometryMinorRadius = 35.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
	
	
	// *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Pikemen
	AutoResolveCombatChain = AutoResolve_PikemenCombatChain
	
	AutoResolveBody = AutoResolve_MordorEasterlingHordeBody
	
	AutoResolveArmor
		RequiredUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_MordorEasterlingHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_MordorEasterlingArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_MordorEasterlingUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_MordorForgedBlades
		Weapon = AutoResolve_MordorEasterlingWeapon
	End

	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorForgedBlades Upgrade_MordorHeavyArmor
End

;-----------------------------------------------------------------------------

ChildObject MordorEasterlingHordePorcupine MordorEasterlingHorde

	// Note - for alternate formations, all info outside of the Contain Behavior module is ignored.
	// Any modifications need to be done via the Attribute Modifiers in the contain module. 
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle 			= 360			//	Can't be flanked
		FlankedDelay 			= 2000
		ObjectStatusOfContained 	= 
		InitialPayload			= MordorEasterling 15
		Slots				= 15
		PassengerFilter			= NONE +INFANTRY
		ShowPips			= No
		ThisFormationIsTheMainFormation = No	//Used to determine which armorset to use (and anything else we want!)
		RandomOffset			= X:2 Y:1
		MeleeBehavior 			= Amoeba
		End
		
		RanksToReleaseWhenAttacking	= 0
		RanksToJustFreeWhenAttacking   	= 0
		AttributeModifiers		= MordorEasterlingHordePorcupine
		IsPorcupineFormation		= Yes
		MinimumHordeSize		= 5

		AlternateFormation		= MordorEasterlingHorde
		VisionRearOverride		= 100%
		VisionSideOverride		= 100%
		NotComboFormation		= Yes // this formation is not suitable for combo, so it will switch out of this when combo-ing

		// Banner Carrier info		
		BannerCarriersAllowed		= ImperialInfantryBanner												// types of units that are allowed as banner carriers
		BannerCarrierPosition		= UnitType:MordorEasterling	Pos:X:0.0 Y:0.0		// (DEFAULT) position of banner carrier
		
		RankInfo	= RankNumber:1 UnitType:MordorEasterling Position:X:20 Y:0	Position:X:-16.18 Y:11.76		Position:X:6.18 Y:-19.02	Position:X:6.18 Y:19.02	Position:X:-16.18 Y:-11.76	Position:X:36.54 Y:16.27	Position:X:-39.13 Y:8.32	Position:X:26.77 Y:-29.73	Position:X:-4.18 Y:39.78	Position:X:-20 Y:-34.64	Position:X:26.77 Y:29.73	Position:X:-39.13 Y:-8.32	Position:X:36.54 Y:-16.27	Position:X:-20 Y:34.64	Position:X:-4.18 Y:-39.78
	End
End

;////////////////////////////////////////////////////////////////////////////////
Object MordorWargHorde

  	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = BIWargSentry_Warg
	SelectPortrait         = UPLoneWarg

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x1
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkIUWar
		End
	End
	
	Side 			= Mordor
	EditorSorting 		= UNIT
	EmotionRange 		= 240
	DisplayName 		= OBJECT:HordeMordorWarg
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_MordorWargHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorWargHorde
	
	WeaponSet
		Conditions 	= None 
		Weapon		= PRIMARY	NormalMeleeHordeRangefinder	; Spear
		Weapon		= SECONDARY	NormalMissileHordeRangefinder	; Bow
	End


	; *** AUDIO Parameters ***;
	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members


	BuildCost = BFA_ANGMAR_DIREWOLF_BUILDCOST			
	BuildTime = BFA_ANGMAR_DIREWOLF_BUILDTIME			
	VisionRange = BFA_ANGMAR_DIREWOLF_VISION_RANGE
	
	ShroudClearingRange = BFA_ANGMAR_DIREWOLF_SHROUD_RANGE       
	
	VisionSide = 50%
	VisionRear = 25%
	
	MaxVisionBonusPercent 	= 300%
	VisionBonusTestRadius 	= 200
	VisionBonusPercentPerFoot = 1.0%
	
	 		
	CommandPoints = 60 	; originally 48
	
	CommandSet = MordorWargHordeCommandSet
		  
	FormationWidth = 2 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth = 1 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	CrushableLevel 			= 2  			; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 			= 1 			; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles
	MinCrushVelocityPercent 	= 50 			; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent 	= 50 			; Lose 20 percent of max velocity when crushing.
	CrushKnockback 			= 40  			; how hard we knock back crushed units.
	CrushZFactor 			= 1.0  			; How much we knock upwards.
		
	
	TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_LARGE_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAVALRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND;UNATTACKABLE 
	
	ThreatLevel = BFA_ISENGARD_WARGRIDER_HORDE_THREAT
	ThreatBreakdown IsengardWargRiderHorde_DetailedThreat
		AIKindOf = CAVALRY
	End
	
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = CavalryHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle 	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        	= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AttackPriority			= AttackPriority_Cavalry
	End

    Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	BFA_CAVALRY_FEAR_SCAN_RADIUS ;250

		AddEmotion	=	Terror_Base
		AddEmotion	=	Doom_Base
		AddEmotion	=   	BraceForBeingCrushed_Base
		AddEmotion	=	UncontrollableFear_Base_Evil
		AddEmotion	=	FearIdle_Base
		AddEmotion	=	FearBusy_Base
		AddEmotion	=	Point_Base
		AddEmotion	=	Taunt_Base	
		AddEmotion	=	CheerIdle_Base
		AddEmotion	=	CheerBusy_Base
		AddEmotion	=	HeroCheerIdle_Base
		AddEmotion	=	HeroCheerBusy_Base
		AddEmotion	=	Alert_Base
		AddEmotion	=   CheerForAboutToCrush_Base
	End	
	
	Behavior = HorseHordeContain ModuleTag_HordeContain
	FrontAngle = 270
		FlankedDelay 		= 2000
		ObjectStatusOfContained = 
		InitialPayload 		= MordorWarg  8
		Slots 			= 8					; originally 10
		PassengerFilter 	= NONE +CAVALRY +AngmarDireWolf
		ShowPips 		= No
		RandomOffset 		= X:2 y:3
		
		MeleeBehavior 		= Amoeba
		End
		
		
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)

		; Banner Carrier info		
		BannerCarriersAllowed	= MordorWarg					; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:MordorWarg	Pos:X:-35.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		//RankInfo	= RankNumber:1 UnitType:MordorWarg Position:X:20 Y:0	Position:X:-16.18 Y:11.76	Position:X:6.18 Y:-19.02	Position:X:6.18 Y:19.02		Position:X:-16.18 Y:-11.76	Position:X:36.54 Y:16.27	Position:X:-39.13 Y:8.32	Position:X:26.77 Y:-29.73	Position:X:-4.18 Y:39.78	Position:X:-20 Y:-34.64		Position:X:26.77 Y:29.73	Position:X:-39.13 Y:-8.32	Position:X:36.54 Y:-16.27	Position:X:-20 Y:34.64	Position:X:-4.18 Y:-39.78

		RankInfo = RankNumber:1 UnitType:AngmarDireWolf Position:X:30 Y:-35			Position:X:42 Y:-15		Position:X:50 Y:15		Position:X:30 Y:-35		;Position:X:40 Y:-30 
		RankInfo = RankNumber:2 UnitType:AngmarDireWolf Position:X:-5 Y:-25 Leader 1 0	Position:X:-20 Y:0 Leader 1 1	Position:X:10 Y:-15 Leader 1 2	Position:X:5 Y:5 Leader 1 3	;Position:X:-10 Y:30 Leader 1 4
		
		RanksToReleaseWhenAttacking = 1
		MeleeAttackLeashDistance = 25; How far the hordes can move from the center of the horde when melee attacking.
		AttributeModifiers = IsengardWargSkirmish		
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
		ScanWidth = 40.0 ; A little less than the width of the horde (which is 2 * 24 = 48)
	End

	Behavior = SpecialPowerModule ModuleTag_HowlUpdate   
		SpecialPowerTemplate      	= SpecialAbilityWargHowl
		UpdateModuleStartsAttack  	= No
		AttributeModifier 		= IsengardWargHowl 	
;		AttributeModifierRange 		= 200
		AttributeModifierAffectsSelf 	= Yes
;		AttributeModifierAffects 	= ANY +CAVALRY 
		AttributeModifierFX 		= FX_WargHowl
	End
	
	LocomotorSet
		Locomotor     = NormalCavalryHordeLocomotor ;WargCavalryHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_MOUNTED_FAST_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_AngmarBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_AngmarSpikedCollar
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly 		= Yes
		StuffToPickUp 		= NONE +CRATE
		ScanRange		= 200
		ScanIntervalSeconds 	= 0.5
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"
	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	Behavior = AISpecialPowerUpdate IsengardWargRiderHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End

	Behavior = AISpecialPowerUpdate HowlAI
		CommandButtonName = Command_SpecialAbilityWargHowl
		SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End
	
	Geometry 		= BOX
	GeometryMajorRadius 	= 30.0
	GeometryMinorRadius 	= 40.0
	GeometryHeight 		= 20.0
	GeometryIsSmall 	= No


	// *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Cavalry
	AutoResolveCombatChain = AutoResolve_CavalryCombatChain

	AutoResolveBody = AutoResolve_GondorKnightHordeBody

End


;------------------------------------------------------------------------------ 
;
;	Black Rider Horde
;
;------------------------------------------------------------------------------ 

Object MordorBlackRiderHorde

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = HIBlackRider
	SelectPortrait         = HPBlackRider

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_CELEBRATING
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x1
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkMUHLa
		End
	End
	
	Side			= Mordor

	EditorSorting		= UNIT
	EmotionRange		= 240
	DisplayName		= OBJECT:HordeBlackRiders
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_MordorBlackRiderHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorBlackRiderHorde
	CommandSet		= EvilMenBlackRiderCommandSet

	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY	NormalMeleeHordeRangefinder		; Spear
	End

; *** AUDIO Parameters ***;

	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	BuildCost			= BFA_EVILMEN_BLACKRIDER_BUILDCOST
	BuildTime			= BFA_EVILMEN_BLACKRIDER_BUILDTIME
	ShockwaveResistance 		= BFA_SHOCKWAVE_RESISTANCE_STRONG	
	ShroudClearingRange		= BFA_EVILMEN_BLACKRIDER_SHROUD_RANGE  	     
	VisionRange			= BFA_EVILMEN_BLACKRIDER_VISION_RANGE
	MaxVisionBonusPercent		= 300%
	VisionBonusTestRadius		= 200
	VisionBonusPercentPerFoot	= 2.0%
	MaxSimultaneousOfType		= 1	

	CommandPoints 			= 150

	CrushableLevel			= 2			; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

	MountedCrusherLevel		= 1
	MountedCrushableLevel		= 3
	CrushWeapon			= KnightCrush

	MinCrushVelocityPercent 	= 50 ; Has to be moving at at least 50% of full speed.
	CrushDecelerationPercent	= 20 ; Lose 80 percent of max velocity when crushing.

	RamPower			= 30;
	RamZMult			= 0.5;
		
    	TransportSlotCount			= BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf					= SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAVALRY HORDE MELEE_HORDE LARGE_RECTANGLE_PATHFIND

	ThreatLevel = BFA_BLACKRIDER_THREAT_LEVEL
	ThreatBreakdown ElvenRivendellLancerHorde_DetailedThreat
		AIKindOf = CAVALRY
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = CavalryHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AILuaEventsList			= EvilMenBlackRiderFunctions  
		AttackPriority			= AttackPriority_Cavalry
	End
	
	Behavior = HorseHordeContain ModuleTag_HordeContain
	FrontAngle = 270
		FlankedDelay 		= 2000
		ObjectStatusOfContained = 
		InitialPayload 		= MordorBlackRider  6
		Slots 			= 6
		PassengerFilter 	= NONE +CAVALRY +MordorBlackRider
		ShowPips 		= No
		RandomOffset 		= X:1 y:1
		MeleeBehavior 		= Amoeba
		End
		
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)

		; Banner Carrier info		
;		BannerCarriersAllowed	= None										; types of units that are allowed as banner carriers
;		BannerCarrierPosition	= UnitType:EvilMenBlackRider	Pos:X:70.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		RankInfo	= RankNumber:1 UnitType:MordorBlackRider Position:X:20 Y:0	Position:X:-16.18 Y:11.76	Position:X:6.18 Y:-19.02	Position:X:6.18 Y:19.02		Position:X:-16.18 Y:-11.76	Position:X:36.54 Y:16.27	
		
		RanksToReleaseWhenAttacking = 1 
		
		MeleeAttackLeashDistance 	= 1   	//How far the hordes can move from the center of the horde when melee attacking.				  
		BackUpMinDelayTime		= 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		= 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		= 1	//The minimum number of	cells to backup
		BackUpMaxDistance		= 3	//The maximum number of	cells to backup
		BackupPercentage		= 80%	//The amount of	chance that a unit will	back up.
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	

    Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
 		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
 		TauntAndPointExcluded		=	NONE
;		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
;		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
 		HeroScanDistance		=	150
 		FearScanDistance		=	BFA_CAVALRY_FEAR_SCAN_RADIUS
 		
		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   	BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		AddEmotion			=	FearIdle_Base
		AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=   	CheerForAboutToCrush_Base
 	End		
    
	LocomotorSet
		Locomotor     = NormalCavalryHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_MOUNTED_FAST_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"

	
	
;	Behavior = AISpecialPowerUpdate RivendellLancerHordeCaptureBuildingAI
;		CommandButtonName = Command_CaptureBuilding
;		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
;	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End

	;------------ BLACKRIDER RESPAWN ABILITY ----------------

	Behavior = AutoHealBehavior ModuleTag_HearthHeal
		StartsActive			= No
		HealOnlyIfNotInCombat 		= Yes				; RotWK Patch bug fix
		HealOnlyIfNotUnderAttack	= Yes				; RotWK Patch bug fix
		TriggeredBy			= Upgrade_MiniHordeLvl3
		HealingAmount			= 30
		Radius				= 100
		StartHealingDelay 		= 7500
		HealingDelay			= 5000
		UnitHealPulseFX			= FX_SpellHealUnitHealBuff
		NonStackable			= Yes
		RespawnNearbyHordeMembers 	= Yes
		RespawnFXList			= FX_BannerCarrierSpawnUnit
		RespawnMinimumDelay		= 200 ; 40 second delay
	End

	;--------- SCREECH -----------------------------------------------------------------------------------
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlackRiderScreechEnabler
		SpecialPowerTemplate = SpecialAbilityScreech
		TriggeredBy = Upgrade_MiniHordeLvl10
	End
	Behavior = SpecialPowerModule ModuleTag_BlackRiderScreech                      
		SpecialPowerTemplate		= SpecialAbilityScreech
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		TriggerFX				= FX_FearBlast
	End
	Behavior = SpecialAbilityUpdate ModuleTag_BlackRiderScreechSAUpdate  
		SpecialPowerTemplate		= SpecialAbilityScreech
		UnpackTime					= 0  
		AwardXPForTriggering		= 0		
		TriggerSound				= NazgulScreech
		Instant						= Yes
		EffectRange					= 180
	End
	
	;--------- DREAD VISAGE -----------------------------------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlackRiderDreadVisage
		SpecialPowerTemplate = SpecialAbilityFakeLeadership
		TriggeredBy = Upgrade_MiniHordeLvl2
	End
	Behavior = SpecialPowerModule ModuleTag_BlackRiderDreadVisageUpdate
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack  = Yes
		StartsPaused = Yes
	End
	Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisage
		StartsActive		= No ;If no, requires upgrade to turn on.
		BonusName		= GenericDebuff
		TriggeredBy		= Upgrade_MiniHordeLvl2
		RefreshDelay	= 2000
		Range			= 200
		TargetEnemy		= Yes
		AntiCategory	= LEADERSHIP BUFF ; This means cancel all previous leadership bonuses
		ObjectFilter	= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
	End
	Behavior = ModelConditionUpgrade ModuleTag_DreadVisageModelCondition
		TriggeredBy			= Upgrade_MiniHordeLvl2
		AddConditionFlags	= USER_3
	End
	
	Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
		InitiallyActive						= No
		TriggeredBy							= Upgrade_BlackRiderDreadVisage
		WhichSpecialPower					= 1
		GenerateTerror						= No
		GenerateFear			= Yes
		EmotionPulseRadius					= 100
		EmotionPulseInterval				= 1000
	End
	
	;--------- MORGUL BLADE -----------------------------------------------------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlackRiderMorgulBlade
		SpecialPowerTemplate = SpecialAbilityBlackRiderMorgulBlade
		TriggeredBy = Upgrade_MiniHordeLvl4
	End
	Behavior = SpecialPowerModule ModuleTag_BlackRiderMorgulBladeStarter
		SpecialPowerTemplate		= SpecialAbilityBlackRiderMorgulBlade
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= FellBeastVoiceAttack		;LurtzVoiceAttackCripplingStrike
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlackRiderMorgulBladeUpdate
		SpecialPowerTemplate    = SpecialAbilityBlackRiderMorgulBlade
		SkipContinue			= Yes

		UnpackTime				= 250
		PreparationTime			= 1
		PersistentPrepTime		= 500
		PackTime				= 100
		
		AwardXPForTriggering	= 0		
		StartAbilityRange		= 15.0
		
		SpecialWeapon			= EvilMenBlackRiderMorgulBlade
		WhichSpecialWeapon		= 1
	End
	Behavior = AutoAbilityBehavior ModuleTag_MorgulBladeAutoAbility
		SpecialAbility	= SpecialAbilityBlackRiderMorgulBlade
		ForbiddenStatus = INSIDE_GARRISON
		AllowSelf		= No
		Query			= 1 BFA_MORGULBLADE_OBJECT_FILTER
	End
	
	;--------- TOGGLE MOUNTED ABILITY -----------------------------------------------------------------------------------
 	Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter                      
 		SpecialPowerTemplate		= SpecialAbilityToggleMounted
 		UpdateModuleStartsAttack	= Yes
 		StartsPaused				= No
 	End
	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
 		SpecialPowerTemplate		= SpecialAbilityToggleMounted
 		TriggerInstantlyOnCreate	= Yes  ;Instantly puts Black Rider on a horse.
 		UnpackTime					= 2000
 		PreparationTime				= 1  
 		PersistentPrepTime			= 250
 		PackTime					= 2000
 		OpacityTarget				= .3		; How see-thru to be at peak of change   
 		AwardXPForTriggering		= 0
	End

	Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
	End
	

	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
	Behavior = AISpecialPowerUpdate ToggleMountedAI
		CommandButtonName = Command_MountHorseBlackRider
		SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Behavior = AISpecialPowerUpdate ScreechAI
		CommandButtonName = Command_SpecialAbilityScreechBlackRider
		SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
	End
	
	Behavior = AISpecialPowerUpdate MorgulBladeAI
		CommandButtonName = Command_BlackRiderMorgulBlade
		SpecialPowerAIType = AI_SPECIAL_POWER_MORGUL_BLADE
	End

	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 40.0
	GeometryHeight = 20.0
	GeometryIsSmall = No


// *** AUTO RESOLVE DATA *** 

//	AutoResolveUnitType = AutoResolveUnit_Hero
//	AutoResolveCombatChain = AutoResolve_HeroCombatChain
//
//	AutoResolveBody = AutoResolve_BlackRiderBody
//
//	AutoResolveArmor
//		Armor = AutoResolve_BlackRiderArmor
//	End
//
//	AutoResolveWeapon
//		Weapon = AutoResolve_BlackRiderWeapon
//	End

End



;-------------------------------------------------------------------------------------------------------------------

;Object MordorHaradrimRiderHorde

;	; This is required for garrisoned objects - please put in all objects.
;	ButtonImage		= WOR_HaradCalvary
;	SelectPortrait		= UPHarradrimCavalryPortrait
;
;	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
;	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_CELEBRATING
;		DefaultModelConditionState
;			Model = None ;InvisHrdeTmp5x1
;		End
;		ModelConditionState = HORDE_EMPTY
;			Model = None
;		End		
;		ModelConditionState = WORLD_BUILDER
;			Model = HordeMarkEURIL
;		End
;	End
;	
;	Side			= Mordor
;	EditorSorting		= UNIT
;	EmotionRange		= 240
;	DisplayName		= OBJECT:HordeMordorHaradrimRider
;	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_MordorHaradrimRiderHorde
;	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorHaradrimRiderHorde
;	
;	WeaponSet
;		Conditions	= None 
;		Weapon		= PRIMARY	NormalMeleeHordeRangefinder		; Spear
;	End
;
; ;*** AUDIO Parameters ***;
;
;	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
;	; are always passed through to members
;	#include "..\..\..\includes\StandardHordeEvaEvents.inc"
;
;	BuildCost		= BFA_MORDOR_HARADRIMRIDERS_BUILDCOST			
;	BuildTime		= BFA_MORDOR_HARADRIMRIDERS_BUILDTIME			
;	VisionRange		= BFA_MORDOR_HARADRIMRIDERS_HORDE_VISION_RANGE
;		VisionSide 	= 50%
;	VisionRear 		= 25%
;	VisionBonusPercentPerFoot = 1.0%
;	ShroudClearingRange 	= BFA_MORDOR_HARADRIMRIDERS_HORDE_SHROUD_RANGE
;	CommandPoints		= 50
;
;	FormationWidth 		= 2 ; Width it occupies in formations. Current choices are 1 or 2.
;	FormationDepth 		= 1 ; Depth it occupies in formations. Current choices are 1 or 2.
;	
;	CrushableLevel				= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
;	CrusherLevel				= 1 
;	MinCrushVelocityPercent			= 50% ; Has to be moving at at least 25% of full speed.
;	CrushDecelerationPercent		= 30% ; Lose 10 percent (100/5 horde members) of max velocity when crushing.
;	CrushKnockback				= 40  ; how hard we knock back crushed units.
;	CrushZFactor				= 1.0  ; How much we knock upwards.
;		
 ;   	TransportSlotCount			= BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
;	KindOf					= SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAVALRY HORDE MELEE_HORDE  ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND
;	CommandSet				= MordorHaradrimRiderHordeCommandSet
;
;	ThreatLevel = BFA_MORDOR_HARADRIMRIDERS_HORDE_THREAT
;	ThreatBreakdown ElvenRivendellLancerHorde_DetailedThreat
;		AIKindOf = CAVALRY
;	End
;	
;	Body = ImmortalBody ModuleTag_ImmortalBody
;		MaxHealth = 1
;	End
;	
;	Behavior = StancesBehavior ModuleTag_StancesBehavior
 ;       StanceTemplate = CavalryHorde
  ;  End
;
;	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
;		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
;		MoodAttackCheckRate		= 500
;		MaxCowerTime			= 5000
;		MinCowerTime			= 3000
;		AILuaEventsList			= CavalryFunctions  
;		AttackPriority			= AttackPriority_Cavalry
;	End
	
;	Behavior = HorseHordeContain ModuleTag_HordeContain
;	FrontAngle = 270
;		FlankedDelay 		= 2000
;		ObjectStatusOfContained = 
;		InitialPayload 		= MordorHaradrimRider  BFA_EVIL_RIDER_LARGE_HORDE_SIZE
;		Slots 			= 10
;		PassengerFilter 	= NONE +CAVALRY +MordorHaradrimRider
;		ShowPips 		= No
;		RandomOffset 		= X:2 y:3
;		MeleeBehavior 		= Amoeba
;		End
;		
;		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)
;
;		; Banner Carrier info		
;		BannerCarriersAllowed	= MordorHaradrimRiderBanner						; types of units that are allowed as banner carriers
;		BannerCarrierPosition	= UnitType:MordorHaradrimRider		Pos:X:70.0 Y:0.0	; (DEFAULT) position of banner carrier for archer horde  
;		
;		RankInfo = RankNumber:1 UnitType:MordorHaradrimRider Position:X:40 Y:0			Position:X:40 Y:25		Position:X:40 Y:-25		Position:X:40 Y:50		Position:X:40 Y:-50 
;		RankInfo = RankNumber:2 UnitType:MordorHaradrimRider Position:X:10 Y:0 Leader 1 0	Position:X:10 Y:15 Leader 1 1	Position:X:10 Y:-25 Leader 1 2	Position:X:10 Y:50 Leader 1 3	Position:X:10 Y:-50 Leader 1 4
;		
;		RanksToReleaseWhenAttacking = 1 2
;		
;		MeleeAttackLeashDistance 	= 1   	//How far the hordes can move from the center of the horde when melee attacking.				  
;		BackUpMinDelayTime		= 1	//The minimum amount of	time to	delay before backing up
;		BackUpMaxDelayTime		= 3000	//The maximum amount of	time to	delay before backing up
;		BackUpMinDistance		= 1	//The minimum number of	cells to backup
;		BackUpMaxDistance		= 3	//The maximum number of	cells to backup
;		BackupPercentage		= 80%	//The amount of	chance that a unit will	back up.
;	End
;
;	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
;		GravityMult = 1.0
;	End
;	
;	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
;		ScanWidth = 70.0 ; A little less than the width of the horde (which is 2 * 40 = 80)
;	End
;
 ;   Behavior = EmotionTrackerUpdate	Module_EmotionTracker
	;	TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
 	;	TauntAndPointUpdateDelay	=	1000					; how often scan (milliseconds)
 	;	TauntAndPointExcluded		=	NONE
;		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
;		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 ;		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
 ;		HeroScanDistance		=	150
 ;		FearScanDistance		=	BFA_CAVALRY_FEAR_SCAN_RADIUS
 ;		
	;	AddEmotion			=	Terror_Base
	;	AddEmotion			=	Doom_Base
	;	AddEmotion			=   	BraceForBeingCrushed_Base
	;	AddEmotion			=	UncontrollableFear_Base
	;	AddEmotion			=	FearIdle_Base
	;	AddEmotion			=	FearBusy_Base
	;	AddEmotion			=	Point_Base
	;	AddEmotion			=	Taunt_Base
 	;	AddEmotion			=	CheerIdle_Base
	;	AddEmotion			=	CheerBusy_Base
	;	AddEmotion			=	HeroCheerIdle_Base
	;	AddEmotion			=	HeroCheerBusy_Base
	;	AddEmotion			=	Alert_Base
	;	AddEmotion			=   	CheerForAboutToCrush_Base
 ;	End		
    
;	LocomotorSet
;		Locomotor     = NormalCavalryHordeLocomotor
;		Condition     = SET_NORMAL
;		Speed         = BFA_NORMAL_MOUNTED_FAST_HORDE_SPEED
;	End
;
;	Behavior = ProductionUpdate ProductionUpdateModuleTag
;		GiveNoXP = Yes
;	End
	
;	#include "..\..\..\includes\CaptureBuilding.inc"

;	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
;		TriggeredBy = Upgrade_MordorBasicTraining
;		LevelsToGain = 1
;		LevelCap = 2
;	End
;	
;	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
;		TriggeredBy = Upgrade_MordorForgedBlades
;	End
;	
;	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
;		TriggeredBy = Upgrade_MordorHeavyArmor
;	End
;	
;;	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality3
;;		TriggeredBy = Upgrade_RohanHorseShield
;;	End
;	
;	Behavior = AISpecialPowerUpdate RivendellLancerHordeCaptureBuildingAI
;		CommandButtonName = Command_CaptureBuilding
;		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
;	End
;	
;	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
;		SkirmishAIOnly = Yes
;		StuffToPickUp = NONE +CRATE
;		ScanRange = 200
;		ScanIntervalSeconds = 0.5
;	End
;	
;	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
;	Behavior = AISpecialPowerUpdate ElvenMirkwoodArcherHordeCaptureBuildingAI
;		CommandButtonName = Command_CaptureBuilding
;		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
;	End
;	
;	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
;		CommandButtonName = Command_SetStanceBattle
;		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
;	End
;
;	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
;		CommandButtonName = Command_SetStanceAggressive
;		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
;	End
;
;	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
;		CommandButtonName = Command_SetStanceHoldGround
;		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
;	End
;
;	Geometry = BOX
;	GeometryMajorRadius = 30.0
;	GeometryMinorRadius = 40.0
;	GeometryHeight = 20.0
;	GeometryIsSmall = No
;

// *** AUTO RESOLVE DATA *** 
;
;	AutoResolveUnitType = AutoResolveUnit_Cavalry
;	AutoResolveCombatChain = AutoResolve_CavalryCombatChain
;
;	AutoResolveBody = AutoResolve_ElvenRivendellLancerHordeBody
;
;	AutoResolveArmor
;		RequiredUpgrades = Upgrade_MordorHeavyArmor
;		Armor = AutoResolve_ElvenRivendellLancerHeavyArmor
;	End
;
;	AutoResolveArmor
;		ExcludedUpgrades = Upgrade_MordorHeavyArmor
;		Armor = AutoResolve_ElvenRivendellLancerArmor
;	End

;	AutoResolveWeapon
;		RequiredUpgrades = Upgrade_MordorForgedBlades
;		Weapon = AutoResolve_ElvenRivendellLancerUpgradedWeapon
;	End
;
;	AutoResolveWeapon
;		ExcludedUpgrades = Upgrade_MordorForgedBlades
;		Weapon = AutoResolve_ElvenRivendellLancerWeapon
;	End
;	
;	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorForgedBlades Upgrade_MordorHeavyArmor
;End

;---------------------------------------------ModData--------------------------------------------------------------

Object MordorFighterHorde
	; This is required for garrisoned objects - please put in all objects.
	ButtonImage = ub_euswordsman
	SelectPortrait	= up_euswordsman


	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkRUPea
		End
	End
	
	Side 			= Mordor
	EditorSorting 		= UNIT
	EmotionRange 		= 240
	DisplayName 		= OBJECT:EmpireSwordsmanHorde
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_EmpireSwordsmanHorde
	DescriptionStrategic 	= CONTROLBAR:LW_ToolTip_MordorFighterHorde
	
	IsAutoBuilt = Yes;

	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NormalMeleeHordeRangefinder
	End

; *** AUDIO Parameters ***;

	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"


	BuildCost 		= MORDOR_FIGHTER_BUILDCOST
	BuildTime 		= MORDOR_FIGHTER_BUILDTIME	   
	ShroudClearingRange 	= MORDOR_FIGHTER_HORDE_SHROUDCLEAR_RANGE
	VisionRange 		= MORDOR_FIGHTER_HORDE_VISION_RANGE 
	VisionSide 		= 50%
	VisionRear 		= 25%
	VisionBonusPercentPerFoot = 1.0%
	CrushableLevel 		= 0  				; What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 		= 0 				; What can I crush?: 0 = small animals, 1 = infantry, 2 = trees, 3 = vehicles 
	CommandPoints 		= 40				; originally 60
	CommandSet 		= EmpireSwordsmanCommandSet
	FormationWidth 		= 2 				; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 2 				; Depth it occupies in formations. Current choices are 1 or 2.
	
    TransportSlotCount = TRANSPORTSLOTCOUNT_LARGE_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_USE_SIEGE_TOWER INFANTRY HORDE ORC MELEE_HORDE ARMY_SUMMARY  LARGE_RECTANGLE_PATHFIND ;BUILD_FOR_FREE - not anymore you dont.
	
	ThreatLevel = MORDOR_FIGHTER_HORDE_THREAT
	ThreatBreakdown MordorFighterHorde_DetailedThreat
		AIKindOf = INFANTRY
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End

	#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle 	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        	= 500
		AILuaEventsList			= InfantryFunctions
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AttackPriority			= AttackPriority_Infantry
	End

	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle 		= 270
		FlankedDelay 		= 2000
		ObjectStatusOfContained = 
		InitialPayload 		= EmpireSwordsman 20
		Slots 			= 20
		PassengerFilter 	= ANY +INFANTRY +MONSTER
		ShowPips 		= No
		
		; Banner Carrier info		
		BannerCarriersAllowed	= ImperialInfantryBanner		; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:EmpireSwordsman	Pos:X:70.0 Y:0.0	; (DEFAULT) position of banner carrier for fighter horde
		
		RandomOffset		= X:5 Y:3	
		
		MeleeBehavior 		= Amoeba
		End
		
		RankInfo = RankNumber:1 UnitType:EmpireSwordsman Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:EmpireSwordsman Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:EmpireSwordsman Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		RankInfo = RankNumber:3 UnitType:EmpireSwordsman Position:X:-10 Y:0 Leader 3 0	Position:X:-10 Y:20 Leader 3 1	Position:X:-10 Y:-20 Leader 3 2	Position:X:-10 Y:40 Leader 3 3	Position:X:-10 Y:-40 Leader 3 4
		
		RanksToReleaseWhenAttacking 	= 1
		
		MeleeAttackLeashDistance 	= 1; How far the hordes can move from the center of the horde when melee attacking.
	End
	
	
	Behavior = SiegeDeployHordeSpecialPower SiegeDeployHordeSpecialPowerModuleTag
		SpecialPowerTemplate = SpecialAbilitySiegeDeploy
	End
	
	Behavior = BloodthirstyUpdate ModuleTag_Bloodthirsty 
		;In order to sacrifice or be sacrificed, you must have a BloodthirstyUpdate
		SacrificeFilter			= ALL		; Hordes with BloodthirstyUpdates I can sacrifice (hint: use template names)
		ExperienceModifier		= 1.95		; Balance this so that a level 1 orc horde eating a level 1 orc horde gets enough exp to get to level 2
		InitiateVoice			= EVA:BloodthirstySacrificOfOrcs
	End
	
	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = LargeGroupBonusUpdate ModuleTag_LargeGroupBonus
		UpdateRate			= 1000
		HordeMemberFilter		= NONE +MordorFighter +MordorArcher	
		Count				= 100
		Radius				= 160.0
		RubOffRadius			= 160.0
		AlliesOnly			= Yes
		AttributeModifier		= MordorLargeGroupBonus
	End
	
 	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
 		
 		TauntAndPointDistance		=	INFANTRY_TAUNT_POINT_RADIUS; 350		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000						; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
		AfraidOf			=	EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
		PointAt				=	EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	INFANTRY_FEAR_SCAN_RADIUS ;250

		AddEmotion		=	Terror_Base
		AddEmotion		=	Doom_Base
		AddEmotion		=   	BraceForBeingCrushed_Base
		AddEmotion		=	UncontrollableFear_Base_Evil
		AddEmotion		=	FearIdle_Base
		AddEmotion		=	FearBusy_Base
		AddEmotion		=	Point_Base
		
		AddEmotion		=	OVERRIDE Taunt_Base	
 		;AttributeModifier	=	GondorFighterTaunt
 		End	
		
		AddEmotion		=	CheerIdle_Base
		AddEmotion		=	CheerBusy_Base
		AddEmotion		=	HeroCheerIdle_Base
		AddEmotion		=	HeroCheerBusy_Base
 		QuarrelProbability	=	0.0002%
 		AddEmotion		=	Quarrel_Base
		AddEmotion		=	Alert_Base
	End		
	
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_FOOT_MED_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality		; Added for BFME Expansion
		TriggeredBy = Upgrade_MordorHeavyArmor				
	End									
		
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2		; Added for BFME Expansion
		TriggeredBy = Upgrade_MordorForgedBlades
	End
	
	
	
	
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End
	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
	Behavior = AISpecialPowerUpdate MordorFighterHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Geometry = BOX
	GeometryMajorRadius = 40.0
	GeometryMinorRadius = 50.0
	GeometryHeight = 20.0
	GeometryIsSmall = No


	// *** AUTO RESOLVE DATA ***
	AutoResolveUnitType = AutoResolveUnit_Soldier
	AutoResolveCombatChain = AutoResolve_SoldierCombatChain
	
	AutoResolveBody = AutoResolve_MordorFighterHordeBody

	AutoResolveArmor
		Armor = AutoResolve_MordorFighterArmor
	End

	AutoResolveWeapon
		Weapon = AutoResolve_MordorFighterWeapon
	End
	
	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining
End

ChildObject MordorFighterHorde_Summoned MordorFighterHorde
	IsTrainable	  =	No
	CommandPoints =	0
	CommandSet	  =	MordorFighterHordeCommandSet_Summoned
	EquivalentTo  =	MordorFighterHorde

	DisplayName = OBJECT:HordeMordorOrcs
	
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained = 
		InitialPayload = EmpireSwordsman_Summoned 20
		Slots = 20
		PassengerFilter = ANY +INFANTRY +MONSTER
		ShowPips = No
		
		RandomOffset=X:5 Y:3	
		
		MeleeBehavior = Amoeba
		End
		
		RankInfo = RankNumber:1 UnitType:EmpireSwordsman_Summoned Position:X:50 Y:0		Position:X:50 Y:20		Position:X:50 Y:-20		Position:X:50 Y:40		Position:X:50 Y:-40 
		RankInfo = RankNumber:2 UnitType:EmpireSwordsman_Summoned Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
		RankInfo = RankNumber:3 UnitType:EmpireSwordsman_Summoned Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		RankInfo = RankNumber:3 UnitType:EmpireSwordsman_Summoned Position:X:-10 Y:0 Leader 3 0	Position:X:-10 Y:20 Leader 3 1	Position:X:-10 Y:-20 Leader 3 2	Position:X:-10 Y:40 Leader 3 3	Position:X:-10 Y:-40 Leader 3 4
		
		RanksToReleaseWhenAttacking = 1
		
		MeleeAttackLeashDistance = 1; How far the hordes can move from the center of the horde when melee attacking.
	End
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	// This one displays the timer, but the one in the uint does the work 
		MinLifetime		= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		MaxLifetime		= BFA_CREATE_A_HERO_REINFORCEMENT_LIFETIME
		DeathType		= FADED
	End	

End

Object EmpireEliteHorde

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= ub_euelite
	SelectPortrait	= up_euelite

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER EMOTION_TERROR EMOTION_LOOK_TO_SKY SELECTED
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End

		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkEUDFG
		End		
	End
	
	Side = Mordor
	EditorSorting = UNIT
	EmotionRange = 240
	DisplayName = OBJECT:EmpireEliteHorde
	DisplayNameStrategic = CONTROLBAR:LW_Unit_EmpireEliteHorde
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_EmpireEliteHorde
		
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NormalMeleeHordeRangefinder
;		Weapon			= TERTIARY	DwarvenZealotBoomAxeRangeFinder
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;		AutoChooseSources	= TERTIARY FROM_PLAYER FROM_SCRIPT
		ShareWeaponReloadTime	= Yes
	End

	; *** AUDIO Parameters ***;
	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	UnitSpecificSounds
		VoiceDesperateAttack  = GondorSoldierVoiceDesperateCharge 
	End

	BuildCost = BFA_DWARVEN_ZERKER_BUILDCOST
	BuildTime = BFA_DWARVEN_ZERKER_BUILDTIME      
	VisionRange = BFA_DWARVEN_ZERKER_HORDE_VISION_RANGE
	ShroudClearingRange = BFA_DWARVEN_ZERKER_SHROUD_RANGE
	VisionSide = 50%
	VisionRear = 25%
	
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%
	MaxSimultaneousOfType		= 3	
	CommandPoints = 120		; originally 60
	
	FormationWidth = 1 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth = 1 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	CrushableLevel = 1  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE NOTIFY_OF_PREATTACK LARGE_RECTANGLE_PATHFIND ;;UNATTACKABLE 
	
	ThreatLevel = BFA_DWARVEN_GUARDIAN_HORDE_THREAT
	ThreatBreakdown DwarvenGuardianHorde_DetailedThreat
		AIKindOf = INFANTRY
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle		= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate			= 500
		MaxCowerTime				= 5000
		MinCowerTime				= 3000

		CanAttackWhileContained			= Yes  			; Can fire out of garrisoned building
		AILuaEventsList				= InfantryFunctions	; 
		AttackPriority				= AttackPriority_Infantry
	End

	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained			= 
		InitialPayload				= EmpireElite 4	;15
		Slots					= 4   			;15
		PassengerFilter				= NONE +INFANTRY
		ShowPips				= No
		ThisFormationIsTheMainFormation = Yes	;//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:0 Y:0
		
		MeleeBehavior = Amoeba
		End					

		
		RankInfo = RankNumber:1 UnitType:EmpireElite Position:X:0 Y:10		Position:X:0 Y:-10		Position:X:0 Y:-30		Position:X:0 Y:30
;		RankInfo = RankNumber:2 UnitType:DwarvenGuardian Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
;		RankInfo = RankNumber:3 UnitType:DwarvenGuardian Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		
		;// Positions for 5
		
		RanksToReleaseWhenAttacking		= 1 
		
		MeleeAttackLeashDistance		= 50	;// How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime			= 1	;// The minimum amount of time to delay before backing up
		BackUpMaxDelayTime			= 3000	;// The maximum amount of time to delay before backing up
		BackUpMinDistance			= 1	;// The minimum number of cells to backup
		BackUpMaxDistance			= 3	;// The maximum number of cells to backup
		BackupPercentage			= 80%	;// The amount of chance that a unit will back up.
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
	End
  
	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
		ScanWidth = 60.0 ; A little less than the width of the horde (which is 2 * 35 = 70)
	End

   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000					; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
 		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	BFA_INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		AddEmotion			=	FearIdle_Base
		AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=   	CheerForAboutToCrush_Base
	End	
  
	LocomotorSet
		Locomotor     = NormalChargeMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_VERYFAST_HORDE_SPEED
	End
	
	LocomotorSet
		Locomotor     = ScaredMeleeHordeLocomotor
		Condition     = SET_SCARED
		Speed         = BFA_NORMAL_FOOT_VERYFAST_HORDE_SPEED
	End
	
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End

		
	CommandSet = EmpireEliteCommandSet


	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_KnifeEnabler
		SpecialPowerTemplate = SpecialAbilityGimliHeroMode
		TriggeredBy = Upgrade_MiniHordeLvl7
	End

	Behavior = WeaponModeSpecialPowerUpdate ModuleTag_KnifeFighterPowerUpdate
		SpecialPowerTemplate	= SpecialAbilityGimliHeroMode
		Duration				= 30000												; Needs to match SpecialAbilityGimliHeroMode
		AttributeModifier		= ZerkerSlayer
		;LockWeaponSlot			= SECONDARY
		WeaponSetFlags			= WEAPONSET_TOGGLE_1
		StartsPaused			= Yes
;		InitiateSound 			= DwarfZerkVoiceLeap		;this doesn't work
	End
	
	;------------ ZERKER RESPAWN ABILITY ----------------

	Behavior = AutoHealBehavior ModuleTag_HearthHeal
		StartsActive			= No
		HealOnlyIfNotInCombat 		= Yes				; RotWK Patch bug fix
		HealOnlyIfNotUnderAttack	= Yes				; RotWK Patch bug fix
		TriggeredBy			= Upgrade_MiniHordeLvl3
		HealingAmount			= 30
		Radius				= 100
		StartHealingDelay 		= 7500
		HealingDelay			= 5000
		UnitHealPulseFX			= FX_SpellHealUnitHealBuff
		NonStackable			= Yes
		RespawnNearbyHordeMembers 	= Yes
		RespawnFXList			= FX_BannerCarrierSpawnUnit
		RespawnMinimumDelay		= 200 ; 40 second delay
	End


	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate DwarvenGuardianHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End	
	Behavior = AISpecialPowerUpdate GimliLeapAttackAI
		CommandButtonName = Command_RohanGimliLeap
		SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
		SpecialPowerRadius = 100
	End

	
	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 20.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
	
	
	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Soldier
	AutoResolveCombatChain = AutoResolve_SoldierCombatChain
	
	AutoResolveBody = AutoResolve_DwarvenGuardianHordeBody
	
;	WorldMapArmoryUpgradesAllowed = Upgrade_DwarvenBasicTraining Upgrade_DwarvenForgedBlades Upgrade_DwarvenMithrilMail
End

ChildObject EmpireEliteHorde_Summoned EmpireEliteHorde
	IsTrainable = No
	CommandPoints = 0
	CommandSet = EmpireEliteCommandSet
	EquivalentTo = EmpireEliteHorde
	MaxSimultaneousOfType		= 10

	KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE NOTIFY_OF_PREATTACK LARGE_RECTANGLE_PATHFIND SUMMONED
	
	Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
	; This one displays the timer, but the one in the uint does the work 
		MinLifetime		= 180000
		MaxLifetime		= 180000
		DeathType		= FADED
	End	
	Behavior = HordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay = 2000
		ObjectStatusOfContained			= 
		InitialPayload				= EmpireElite_Summoned 4	;15
		Slots					= 4   			;15
		PassengerFilter				= NONE +INFANTRY
		ShowPips				= No
		ThisFormationIsTheMainFormation = Yes	;//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:0 Y:0
		
		MeleeBehavior = Amoeba
		End					

		
		RankInfo = RankNumber:1 UnitType:EmpireElite_Summoned Position:X:0 Y:10		Position:X:0 Y:-10		Position:X:0 Y:-30		Position:X:0 Y:30
;		RankInfo = RankNumber:2 UnitType:DwarvenGuardian Position:X:30 Y:0 Leader 1 0	Position:X:30 Y:20 Leader 1 1	Position:X:30 Y:-20 Leader 1 2	Position:X:30 Y:40 Leader 1 3	Position:X:30 Y:-40 Leader 1 4
;		RankInfo = RankNumber:3 UnitType:DwarvenGuardian Position:X:10 Y:0 Leader 2 0	Position:X:10 Y:20 Leader 2 1	Position:X:10 Y:-20 Leader 2 2	Position:X:10 Y:40 Leader 2 3	Position:X:10 Y:-40 Leader 2 4
		
		
		;// Positions for 5
		
		RanksToReleaseWhenAttacking		= 1 
		
		MeleeAttackLeashDistance		= 50	;// How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime			= 1	;// The minimum amount of time to delay before backing up
		BackUpMaxDelayTime			= 3000	;// The maximum amount of time to delay before backing up
		BackUpMinDistance			= 1	;// The minimum number of cells to backup
		BackUpMaxDistance			= 3	;// The maximum number of cells to backup
		BackupPercentage			= 80%	;// The amount of chance that a unit will back up.
	End

	GeometryMinorRadius = 40.0
End


Object EmpireSorcererHorde

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= WOR_Necromancer
	SelectPortrait	= up_empiresorcerer

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER EMOTION_TERROR EMOTION_LOOK_TO_SKY SELECTED
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x2
		End

		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkEUDFG
		End		
	AnimationState = JUST_BUILT
		BeginScript
			CurDrawableHideSubObject("BlueFlame")
			CurDrawableHideSubObject("PurpleFlame")
			CurDrawableHideSubObject("GreenFlame")
			CurDrawableHideSubObject("BlueGlow")
			CurDrawableHideSubObject("PurpleGlow")
			CurDrawableHideSubObject("GreenGlow")
		EndScript
	End
	
	End
	
	Side = Mordor
	EditorSorting = UNIT
	EmotionRange = 240
	DisplayName = OBJECT:HordeEmpireSorcerer
	DisplayNameStrategic = CONTROLBAR:LW_Unit_EmpireSorcererHorde
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_AngmarNecromancerHorde
		
	WeaponSet
		Conditions = None 
		Weapon = PRIMARY    NormalMeleeHordeRangefinder
	End

	; *** AUDIO Parameters ***;
	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	UnitSpecificSounds
		VoiceDesperateAttack  = GondorSoldierVoiceDesperateCharge 
	End

	BuildCost 			= BFA_ANGMAR_NECRO_BUILDCOST
	BuildTime 			= BFA_ANGMAR_NECRO_BUILDTIME      
	VisionRange 			= BFA_ANGMAR_NECRO_HORDE_VISION_RANGE
	ShroudClearingRange 		= BFA_ANGMAR_NECRO_SHROUD_RANGE
	VisionSide 			= 50%
	VisionRear 			= 25%
	
	MaxVisionBonusPercent 		= 300%
	VisionBonusTestRadius 		= 200
	VisionBonusPercentPerFoot 	= 1.0%
	CommandPoints 			= 40		; originally 60
	
	FormationWidth 			= 2 		; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 			= 2 		; Depth it occupies in formations. Current choices are 1 or 2.
	
	CrushableLevel 			= 0  		;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel 			= 1 
	
	CrushOnlyWhileCharging 		= YES 		; // the guardian is only supposed to crush during his special charge ability
	
	MinCrushVelocityPercent 	= 50% 		; Has to be moving at least xx% of full speed
	CrushDecelerationPercent 	= 90% 		; Lose xx% max velocity when crushing -- thus they only crush 1 row of infantry
	
	CrushKnockback 			= 40  		; how hard we knock back crushed units.
	CrushZFactor 			= 1.0 		; How much we knock upwards.

    TransportSlotCount = BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf = SELECTABLE SUPPORT ATTACK_NEEDS_LINE_OF_SIGHT ARCHER HORDE NOTIFY_OF_PREATTACK ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND INFANTRY PATH_THROUGH_INFANTRY ;;UNATTACKABLE 
	
	ThreatLevel = BFA_ANGMAR_NECRO_HORDE_THREAT
	ThreatBreakdown AngmarGuardianHorde_DetailedThreat
		AIKindOf = ARCHER
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
;	Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
;		LevelToGrant	= 2
;		MPOnly		= No
;	End
	
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = ArcherHorde
    End
	
	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000

		CanAttackWhileContained		= Yes  ; Can fire out of garrisoned building
		AILuaEventsList			= InfantryFunctions	; 
		AttackPriority			= AttackPriority_Infantry
	End

	Behavior 				= HordeContain ModuleTag_HordeContain
		FrontAngle 			= 270
		FlankedDelay 			= 2000
		ObjectStatusOfContained		= 
		InitialPayload			= EmpireSpirit 7
		Slots				= 7
		PassengerFilter			= NONE +ARCHER
		ShowPips				= No
		ThisFormationIsTheMainFormation = Yes	;//Used to determine which armorset to use (and anything else we want!)
		RandomOffset = X:10 Y:10
		
		MeleeBehavior = Amoeba

        ;AlternateFormation			= AngmarPhalanxHorde
        ;IsPorcupineFormation			= Yes

		End					

		; Banner Carrier info		
		BannerCarriersAllowed	= EmpireSorcerer										;// types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:EmpireSorcerer	Pos:X:0.0 Y:0.0		;// (DEFAULT) position of banner carrier
		BannerCarrierDestroyHordeOnDeath = Yes
		BannerCarrierHordeDeathType = +NORMAL ;NORMAL, NONE, CRUSHED, BURNED, EXPLODED, POISONED, TOPPLED, FLOODED, SUICIDED, LASERED, DETONATED, SPLATTED, POISONED_BETA, EXTRA_2, EXTRA_3, EXTRA_4, EXTRA_5, EXTRA_6, EXTRA_7, EXTRA_8, KNOCKBACK, SUPERNATURAL, FADED, SLAUGHTERED
      		BannerCarrierMinLevel   = 0;

		RankInfo	= RankNumber:1 UnitType:EmpireSpirit Position:X:20 Y:0	Position:X:-16.18 Y:11.76		Position:X:-16.18 Y:-11.76	Position:X:-20 Y:0	Position:X:16.18 Y:-11.76		Position:X:16.18 Y:11.76		Position:X:-36 Y:0

		;// Positions for 5
		
		RanksToReleaseWhenAttacking	= 1 
		
		MeleeAttackLeashDistance	= 25		;// How far the hordes can move from the center of the horde when melee attacking.				
		BackUpMinDelayTime		= 1		;// The minimum amount of time to delay before backing up
		BackUpMaxDelayTime		= 3000		;// The maximum amount of time to delay before backing up
		BackUpMinDistance		= 1		;// The minimum number of cells to backup
		BackUpMaxDistance		= 3		;// The maximum number of cells to backup
		BackupPercentage		= 80%		;// The amount of chance that a unit will back up.
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
	End
  
	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
		ScanWidth = 60.0 ; A little less than the width of the horde (which is 2 * 35 = 70)
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"

   	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
		TauntAndPointUpdateDelay	=	1000					; how often scan (milliseconds)
		TauntAndPointExcluded		=	NONE
 		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
		HeroScanDistance		=	150
		FearScanDistance		=	BFA_INFANTRY_FEAR_SCAN_RADIUS

		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   	BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		AddEmotion			=	FearIdle_Base
		AddEmotion			=	FearBusy_Base

		;AddEmotion			=	Point_Base
		;AddEmotion			=	Taunt_Base

 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base

		;AddEmotion			=   	CheerForAboutToCrush_Base
	End	
  
	LocomotorSet
		Locomotor     = NormalMeleeHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_FOOT_SLOW_HORDE_SPEED
	End
	
	LocomotorSet
		Locomotor     = ScaredMeleeHordeLocomotor
		Condition     = SET_SCARED
		Speed         = BFA_NORMAL_FOOT_SLOW_HORDE_SPEED
	End
	
	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

;	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
;		TriggeredBy = Upgrade_DwarvenBasicTraining
;		LevelsToGain = 1
;		LevelCap = 2
;	End
;	
;	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality1
;		TriggeredBy = Upgrade_DwarvenSiegeHammer
;	End
;	
;	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
;		TriggeredBy = Upgrade_DwarvenForgedBlades
;	End
;	
;	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality3
;		TriggeredBy = Upgrade_DwarvenMithrilMail
;	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End

		Behavior = DoCommandUpgrade ModuleTag_UpgradeShade
		TriggeredBy = Upgrade_BecomeShade
		GetUpgradeCommandButtonName = Command_SpecialAbilityEmpireSorcererToShade
	End
	
 	Behavior = SpecialPowerModule ModuleTagBecomeShadeStarter
 		SpecialPowerTemplate		= SpecialAbilityEmpireSorcererToShade
 		UpdateModuleStartsAttack	= Yes
 		StartsPaused			= No
		TriggerFX			= FX_Chillwind
 	End

	Behavior = SummonReplacementSpecialAbilityUpdate ModuleTag_BecomeShade
		SpecialPowerTemplate    	= SpecialAbilityEmpireSorcererToShade
		UnpackTime              	= 0									; Drawing the horn
		PreparationTime        		= 0									; Blowing
		PersistentPrepTime     	 	= 0									; nothing
		PackTime                	= 0									; nothing
		AwardXPForTriggering    	= 0
 		MountedTemplate			= EmpireShade
 		IgnoreFacingCheck		= Yes
		MustFinishAbility		= Yes
	End
    ;--------------------Upgraded Command Sets-------------------------------------
  	Behavior = CommandSetUpgrade ModuleTag_commandSetWellOfSouls
		TriggeredBy 			= Upgrade_AngmarWellOfSouls
		CommandSet 			= AngmarNecromancerHordeWellCommandSet
	End

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_unpauseWellOfSouls
		TriggeredBy 			= Upgrade_AngmarWellOfSouls
		SpecialPowerTemplate = SpecialAbilityNecroWellOfSouls
	End

  	Behavior = CommandSetUpgrade ModuleTag_commandSetSoulFreeze
		TriggeredBy 			= Upgrade_AngmarSoulFreeze
		CommandSet 			= AngmarNecromancerHordeFreezeCommandSet
	End

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_unpauseSoulFreeze
		TriggeredBy 			= Upgrade_AngmarSoulFreeze
		SpecialPowerTemplate = SpecialAbilityNecroSoulFreeze
	End

  	Behavior = CommandSetUpgrade ModuleTag_commandSetCorpseRain
		TriggeredBy 			= Upgrade_AngmarCorpseRain
		CommandSet 			= AngmarNecromancerHordeRainCommandSet
	End

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_unpauseCorpseRain
		TriggeredBy 			= Upgrade_AngmarCorpseRain
		SpecialPowerTemplate = SpecialAbilityNecroCorpseRain
	End

	Behavior = SubObjectsUpgrade ModuleTag_StaffWellOfSouls
		TriggeredBy 			= Upgrade_AngmarWellOfSouls
		ShowSubObjects	= PurpleFlame PurpleGlow
		HideSubObjects = MultiFlame MultiGlow BlueFlame BlueGlow GreenFlame GreenGlow
	End
	
	Behavior = SubObjectsUpgrade ModuleTag_StaffSoulFreeze
		TriggeredBy 			= Upgrade_AngmarSoulFreeze
		ShowSubObjects	= BlueFlame BlueGlow
		HideSubObjects = MultiFlame MultiGlow PurpleFlame PurpleGlow GreenFlame GreenGlow
	End

	
	Behavior = SubObjectsUpgrade ModuleTag_StaffCorpseRain
		TriggeredBy 			= Upgrade_AngmarCorpseRain
		ShowSubObjects	= GreenFlame GreenGlow
		HideSubObjects = MultiFlame MultiGlow PurpleFlame PurpleGlow BlueFlame BlueGlow
	End


;--------------------Necro Death Mask Power--------------------------------
;	Behavior = SpecialPowerModule ModuleTag_NecroDeathMaskUpdate
;		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
;		UpdateModuleStartsAttack	= Yes
;		StartsPaused			= No
;	End
;
;	Behavior = AttributeModifierAuraUpdate ModuleTag_DeathMask
;		StartsActive			= Yes ;If no, requires upgrade to turn on.
;		BonusName			= DeathMaskModifier
;		RefreshDelay			= 2000
;		Range				= BFA_ANGMAR_NECRO_DEATH_MASK_RANGE
;		TargetEnemy			= Yes
;		AntiCategory			= LEADERSHIP BUFF ; This means cancel all previous leadership bonuses
;		ObjectFilter			= ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
;;	End


		
	CommandSet = EmpireSorcererHordeCommandSet
	
	;--------------------Necro Fell Strength power---------------------------------
	Behavior = SpecialPowerModule ModuleTag_NecroFellStrengthStarter
		SpecialPowerTemplate		= SpecialAbilityNecroFellStrength
		StartsPaused			= No
 		UpdateModuleStartsAttack	= No
	End
	
	Behavior = ActivateModuleSpecialPower ModuleTag_NecroFellStrengthMover
		SpecialPowerTemplate		= SpecialAbilityNecroFellStrength
		StartAbilityRange		= BFA_ANGMAR_NECRO_FELL_STRENGTH_START_RANGE
		TriggerSpecialPower		= ModuleTag_NecroFellStrengthBlastStarter TARGETPOS
		TriggerSpecialPower		= ModuleTag_NecroFellStrengthBlastTrigger TARGETPOS
		TriggerSpecialPower		= ModuleTag_NecroFellStrengthBuffStarter OBJECTPOS
	End

	Behavior = SpecialPowerModule ModuleTag_NecroFellStrengthBlastTrigger
		SpecialPowerTemplate		= SpecialAbilityNecroFellStrengthFXStarter
		TriggerFX			= FX_FellStrength
		UpdateModuleStartsAttack	= No
		StartsPaused			= No
   	End

	Behavior = SpecialPowerModule ModuleTag_NecroFellStrengthBuffStarter
		SpecialPowerTemplate		= SpecialAbilityActivateeDummy		
		AttributeModifier		= FellStrengthModifier
		AttributeModifierRange		= BFA_ANGMAR_NECRO_FELL_STRENGTH_BUFF_RANGE
		AttributeModifierAffects	= ANY +INFANTRY +CAVALRY +MONSTER +HORDE ALLIES -STRUCTURE
		AttributeModifierAffectsSelf	= Yes
		UpdateModuleStartsAttack	= No
		StartsPaused			= No
   	End

	Behavior = SpecialPowerModule ModuleTag_NecroFellStrengthBlastStarter       
		SpecialPowerTemplate      	= SpecialAbilityWizardBlast
		UpdateModuleStartsAttack  	= Yes
		StartsPaused		  	= No
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_NecroFellStrengthBlastWeaponFireUpdate   
		SpecialPowerTemplate    	= SpecialAbilityWizardBlast
		WhichSpecialWeapon		= 5
		SkipContinue			= Yes
		FreezeAfterTriggerDuration 	= 100 ; Hold AI for this long after we fire.
		UnpackTime					= 700
		PreparationTime				= 1   
		;PersistentPrepTime			= 1000
		PackTime					= 100
		AwardXPForTriggering    	= 0		
		StartAbilityRange		= BFA_ANGMAR_NECRO_FELL_STRENGTH_START_RANGE		
        	TriggerSound = NecroVoiceModeFellStrength 
		SpecialWeapon			= NecroFellStrength
	End

	;------- ISTARI WEAPON --------------------------------------------------------------------------------

	Behavior = SpecialPowerModule ModuleTag_IstariLightPower                      
		SpecialPowerTemplate		= SpecialAbilityIstariLightSorcerer
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= No
;		InitiateSound			= GandalfVoiceAttackIstariLight	;this plays when he targets, not when he fires
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IstariLightUpdate
		SpecialPowerTemplate    = SpecialAbilityIstariLightSorcerer
		SkipContinue			= Yes
		UnpackTime              = 2000 
 		PreparationTime         = 1  
 		PersistentPrepTime      = 2000
 		PackTime                = 500
		AwardXPForTriggering    = 0
		StartAbilityRange		= BFA_GANDALF_PHASER_CAST_RANGE ; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS		= Yes		
		SpecialWeapon			= RedEnergyShaft 
		MustFinishAbility		= Yes
		WhichSpecialWeapon		= 3
		BusyForDuration			= 2500
	End
	
	/////////////////////
	// AISpecialPowers
	/////////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate AngmarNecroFellStrengthAI
		CommandButtonName = Command_NecromancerFellStrength
		SpecialPowerAIType = AI_SPECIAL_POWER_AOE_AND_BUFF
	End

	
	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 50.0
	GeometryHeight = 20.0
	GeometryIsSmall = No
	
	
	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Support
	
	; // TODO:  Create a SupportCombatChain
	AutoResolveCombatChain = AutoResolve_SoldierCombatChain
	
	AutoResolveBody = AutoResolve_DwarvenGuardianHordeBody
	
	AutoResolveArmor
		RequiredUpgrades = Upgrade_DwarvenMithrilMail
		Armor = AutoResolve_DwarvenGuardianHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_DwarvenMithrilMail
		Armor = AutoResolve_DwarvenGuardianArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_DwarvenForgedBlades
		Weapon = AutoResolve_DwarvenGuardianUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_DwarvenForgedBlades
		Weapon = AutoResolve_DwarvenGuardianWeapon
	End
	
	; Necromancers should not be upgradable at Living World forges!
	; WorldMapArmoryUpgradesAllowed = Upgrade_DwarvenBasicTraining Upgrade_DwarvenForgedBlades Upgrade_DwarvenMithrilMail
End

Object ImperialRaiderHorde

	; This is required for garrisoned objects - please put in all objects.
	ButtonImage		= ub_euraider
	SelectPortrait		= up_euraider

	Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
	    DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_CELEBRATING
		DefaultModelConditionState
			Model = None ;InvisHrdeTmp5x1
		End
		ModelConditionState = HORDE_EMPTY
			Model = None
		End		
		ModelConditionState = WORLD_BUILDER
			Model = HordeMarkEURIL
		End
	End
	
	Side			= Wild
	EditorSorting		= UNIT
	EmotionRange		= 240
	DisplayName		= OBJECT:HordeImperialRaider
	DisplayNameStrategic 	= CONTROLBAR:LW_Unit_ImperialRaiderHorde
	DescriptionStrategic 	= CONTROLBAR:LW_Unit_ImperialRaiderHorde
	
	WeaponSet
		Conditions	= None 
		Weapon		= PRIMARY	NormalMissileHordeRangefinder		; Spear
	End

; *** AUDIO Parameters ***;

	; Note: Don't put voice parameters here -- they will be ignored. Voice play requests
	; are always passed through to members
	#include "..\..\..\includes\StandardHordeEvaEvents.inc"

	BuildCost		= BFA_ELVEN_RIVENDELLARCHER_BUILDCOST			
	BuildTime		= BFA_ELVEN_RIVENDELLARCHER_BUILDTIME			
	VisionRange		= BFA_ELVEN_RIVENDELLARCHER_HORDE_VISION_RANGE
		VisionSide 	= 50%
	VisionRear 		= 25%
	VisionBonusPercentPerFoot = 1.0%
	ShroudClearingRange 	= BFA_ELVEN_RIVENDELLARCHER_SHROUD_RANGE
	CommandPoints		= 80

	FormationWidth 		= 2 ; Width it occupies in formations. Current choices are 1 or 2.
	FormationDepth 		= 1 ; Depth it occupies in formations. Current choices are 1 or 2.
	
	CrushableLevel				= 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
	CrusherLevel				= 1 
	MinCrushVelocityPercent			= 50% ; Has to be moving at at least 25% of full speed.
	CrushDecelerationPercent		= 30% ; Lose 10 percent (100/5 horde members) of max velocity when crushing.
	CrushKnockback				= 40  ; how hard we knock back crushed units.
	CrushZFactor				= 1.0  ; How much we knock upwards.
		
    	TransportSlotCount			= BFA_TRANSPORTSLOTCOUNT_SMALL_HORDE
	KindOf					= SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAVALRY HORDE MELEE_HORDE  ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND
	CommandSet				= ImperialRaiderHordeCommandSet

	ThreatLevel = BFA_ELVEN_RIVENDELLARCHER_HORDE_THREAT
	ThreatBreakdown ElvenRivendellLancerHorde_DetailedThreat
		AIKindOf = CAVALRY
	End
	
	Body = ImmortalBody ModuleTag_ImmortalBody
		MaxHealth = 1
	End
	
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = CavalryHorde
    End

	Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		MoodAttackCheckRate		= 500
		MaxCowerTime			= 5000
		MinCowerTime			= 3000
		AILuaEventsList			= CavalryFunctions  
		AttackPriority			= AttackPriority_Cavalry
	End
	
	Behavior = HorseHordeContain ModuleTag_HordeContain
		FrontAngle = 270
		FlankedDelay 		= 2000
		ObjectStatusOfContained = 
		InitialPayload 		= ImperialRaider  BFA_GOOD_RIDER_LARGE_HORDE_SIZE
		Slots 			= 10
		PassengerFilter 	= NONE +CAVALRY +ElvenRivendellLancerBanner
		ShowPips 		= No
		RandomOffset 		= X:2 y:3
		MeleeBehavior 		= Amoeba
		End
		
		ThisFormationIsTheMainFormation = Yes	;Used to determine which armorset to use (and anything else we want!)

		; Banner Carrier info		
		BannerCarriersAllowed	= ImperialKnightBanner										; types of units that are allowed as banner carriers
		BannerCarrierPosition	= UnitType:ImperialKnight	Pos:X:75.0 Y:0.0		; (DEFAULT) position of banner carrier for archer horde
		
		RankInfo = RankNumber:1 UnitType:ImperialRaider Position:X:45 Y:0			Position:X:45 Y:20		Position:X:45 Y:-20		Position:X:45 Y:40		Position:X:45 Y:-40 
		RankInfo = RankNumber:2 UnitType:ImperialRaider Position:X:10 Y:0 Leader 1 0	Position:X:10 Y:20 Leader 1 1	Position:X:10 Y:-20 Leader 1 2	Position:X:10 Y:40 Leader 1 3	Position:X:10 Y:-40 Leader 1 4
		
		RanksToReleaseWhenAttacking = 1 2
		
		MeleeAttackLeashDistance 	= 1   	//How far the hordes can move from the center of the horde when melee attacking.				  
		BackUpMinDelayTime		= 1	//The minimum amount of	time to	delay before backing up
		BackUpMaxDelayTime		= 3000	//The maximum amount of	time to	delay before backing up
		BackUpMinDistance		= 1	//The minimum number of	cells to backup
		BackUpMaxDistance		= 3	//The maximum number of	cells to backup
		BackupPercentage		= 80%	//The amount of	chance that a unit will	back up.
	End

	Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
		GravityMult = 1.0
	End
	
	Behavior = HordeNotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
		ScanWidth = 70.0 ; A little less than the width of the horde (which is 2 * 40 = 80)
	End

    Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance		=	BFA_INFANTRY_TAUNT_POINT_RADIUS		; max distance to taunted/pointed objet
 		TauntAndPointUpdateDelay	=	1000	; how often scan (milliseconds)
 		TauntAndPointExcluded		=	NONE
		AfraidOf			=	BFA_EMOTION_AFRAIDOF_OBJECTFILTER
		AlwaysAfraidOf			=	BFA_EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
 		PointAt				=	BFA_EMOTION_POINTAT_OBJECTFILTER
 		HeroScanDistance		=	150
 		FearScanDistance		=	BFA_CAVALRY_FEAR_SCAN_RADIUS
 		
		AddEmotion			=	Terror_Base
		AddEmotion			=	Doom_Base
		AddEmotion			=   	BraceForBeingCrushed_Base
		AddEmotion			=	UncontrollableFear_Base
		AddEmotion			=	FearIdle_Base
		AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		AddEmotion			=	HeroCheerIdle_Base
		AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=   	CheerForAboutToCrush_Base
 	End		
    
	LocomotorSet
		Locomotor     = NormalCavalryHordeLocomotor
		Condition     = SET_NORMAL
		Speed         = BFA_NORMAL_MOUNTED_FAST_HORDE_SPEED
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End
	
	#include "..\..\..\includes\CaptureBuilding.inc"

	Behavior = LevelUpUpgrade ModuleTag_BasicTraining
		TriggeredBy = Upgrade_MordorBasicTraining
		LevelsToGain = 1
		LevelCap = 2
	End
	
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
		TriggeredBy = Upgrade_MordorFireArrows
	End
	
	Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
		TriggeredBy = Upgrade_MordorHeavyArmor
	End
	
	
	Behavior = AISpecialPowerUpdate RivendellLancerHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
		SkirmishAIOnly = Yes
		StuffToPickUp = NONE +CRATE
		ScanRange = 200
		ScanIntervalSeconds = 0.5
	End
	
	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
	Behavior = AISpecialPowerUpdate ElvenMirkwoodArcherHordeCaptureBuildingAI
		CommandButtonName = Command_CaptureBuilding
		SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
	End
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	Geometry = BOX
	GeometryMajorRadius = 30.0
	GeometryMinorRadius = 40.0
	GeometryHeight = 20.0
	GeometryIsSmall = No


// *** AUTO RESOLVE DATA *** 

	AutoResolveUnitType = AutoResolveUnit_Cavalry
	AutoResolveCombatChain = AutoResolve_CavalryCombatChain

	AutoResolveBody = AutoResolve_ElvenRivendellLancerHordeBody

	AutoResolveArmor
		RequiredUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_ElvenRivendellLancerHeavyArmor
	End

	AutoResolveArmor
		ExcludedUpgrades = Upgrade_MordorHeavyArmor
		Armor = AutoResolve_ElvenRivendellLancerArmor
	End

	AutoResolveWeapon
		RequiredUpgrades = Upgrade_MordorFireArrows
		Weapon = AutoResolve_ElvenLorienArcherUpgradedWeapon
	End

	AutoResolveWeapon
		ExcludedUpgrades = Upgrade_MordorFireArrows
		Weapon = AutoResolve_ElvenLorienArcherWeapon
	End

	WorldMapArmoryUpgradesAllowed = Upgrade_MordorBasicTraining Upgrade_MordorFireArrows Upgrade_MordorHeavyArmor
End

